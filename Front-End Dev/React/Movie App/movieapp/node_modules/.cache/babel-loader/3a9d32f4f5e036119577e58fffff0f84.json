{"ast":null,"code":"var _jsxFileName = \"/Users/syukrirahiman/OneDrive - Singapore Management University/React/movieapp/src/RecommendMovies.js\";\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './Slider.css';\nimport Navbar from 'react-bootstrap/Navbar';\nimport { Carousel, Button } from 'react-bootstrap';\nimport { Link } from 'react-router-dom';\n\nclass RecommendMovies extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      apikeyIS: '5ogMBOJo2nty7v7YNku1eZkxHEAdEJMK',\n      apikeyOMDB: '9e790f8b',\n      movie_arr: [],\n      recommended_movie: '',\n      redirect: false,\n      selected_movie: '',\n      top_rated_movies: ''\n    }; // this.handleChange = this.handleChange.bind(this);\n  }\n\n  componentDidMount() {\n    this.getData();\n  }\n\n  render() {\n    const carouselitem = {\n      width: \"100%\",\n      height: 600,\n      backgroundColor: \"rgb(249, 249, 249)\"\n    };\n    const centralize = {\n      margin: \"auto\",\n      width: \"100%\",\n      // textAlign: 'center',\n      paddingTop: \"30px\"\n    };\n    const font = {\n      color: \"black\",\n      paddingTop: \"20px\"\n    };\n    console.log(this.state);\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    });\n  }\n\n  getData() {\n    var xhr = new XMLHttpRequest();\n    let urlCinema = \"https://api.internationalshowtimes.com/v4/movies/?countries=SG&apikey=\" + this.state.apikeyIS;\n    xhr.addEventListener('load', () => {\n      var resp = JSON.parse(xhr.responseText);\n      this.setState({\n        movie_arr: resp.movies\n      }, () => {\n        this.getTop5Movies();\n      });\n    });\n    xhr.open('GET', urlCinema);\n    xhr.send();\n  }\n\n  getTop5Movies() {\n    var movie_arr = this.state.movie_arr;\n    var toptreshhold = 6;\n    var result = new Array();\n\n    for (let i = 0; i < movie_arr.length; i++) {\n      var movie = movie_arr[i];\n      var omdbdetails = this.getIMDBId(movie);\n\n      if (omdbdetails.imdbRating) {\n        if (omdbdetails.imdbRating >= toptreshhold) {\n          result.push(movie_arr[i]);\n        }\n      }\n\n      if (result.length > 5) {\n        break;\n      }\n    }\n\n    this.setState({\n      top_rated_movies: result\n    });\n  }\n\n  getIMDBId(movie) {\n    var movie_omdb_details = '';\n    var movie_id = this.state.movie_is_details.id;\n    var xhr = new XMLHttpRequest();\n    let urlmoviedetails = \"https://api.internationalshowtimes.com/v4/movies/\" + movie_id + \"?fields=imdb_id&apikey=\" + this.state.apikeyIS;\n    xhr.addEventListener('load', () => {\n      // update the state of the component with the result here\n      var resp = JSON.parse(xhr.responseText);\n      var imdb_id = resp.movie.imdb_id;\n      var xhr2 = new XMLHttpRequest(); //get movie details from imdb\n\n      let urlMovieDetails = \"http://www.omdbapi.com/?i=\" + imdb_id + \"&apikey=\" + this.state.apikeyOMDB;\n      xhr2.addEventListener('load', () => {\n        var resp = JSON.parse(xhr2.responseText);\n        movie_omdb_details = resp;\n      });\n      xhr2.open('GET', urlMovieDetails);\n      xhr2.send();\n    });\n    xhr.open('GET', urlmoviedetails);\n    xhr.send();\n    return movie_omdb_details;\n  }\n\n}\n\nexport default RecommendMovies;","map":{"version":3,"sources":["/Users/syukrirahiman/OneDrive - Singapore Management University/React/movieapp/src/RecommendMovies.js"],"names":["React","ReactDOM","Navbar","Carousel","Button","Link","RecommendMovies","Component","constructor","props","state","apikeyIS","apikeyOMDB","movie_arr","recommended_movie","redirect","selected_movie","top_rated_movies","componentDidMount","getData","render","carouselitem","width","height","backgroundColor","centralize","margin","paddingTop","font","color","console","log","xhr","XMLHttpRequest","urlCinema","addEventListener","resp","JSON","parse","responseText","setState","movies","getTop5Movies","open","send","toptreshhold","result","Array","i","length","movie","omdbdetails","getIMDBId","imdbRating","push","movie_omdb_details","movie_id","movie_is_details","id","urlmoviedetails","imdb_id","xhr2","urlMovieDetails"],"mappings":"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","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './Slider.css';\nimport Navbar from 'react-bootstrap/Navbar';\nimport { Carousel, Button } from 'react-bootstrap';\nimport { Link } from 'react-router-dom';\n\nclass RecommendMovies extends React.Component {\n\n    constructor(props) {\n        super(props)\n        this.state = {\n            apikeyIS: '5ogMBOJo2nty7v7YNku1eZkxHEAdEJMK',\n            apikeyOMDB: '9e790f8b',\n            movie_arr: [],\n            recommended_movie: '',\n            redirect: false,\n            selected_movie: '',\n            top_rated_movies: '',\n        };\n        // this.handleChange = this.handleChange.bind(this);\n    }\n\n    componentDidMount(){\n        this.getData()\n    }\n\n    render() {\n\n        const carouselitem = {\n            width: \"100%\",\n            height: 600,\n            backgroundColor: \"rgb(249, 249, 249)\",\n        };\n\n        const centralize = {\n            margin: \"auto\",\n            width: \"100%\",\n            // textAlign: 'center',\n            paddingTop: \"30px\"\n        };\n\n        const font = {\n            color: \"black\",\n            paddingTop: \"20px\",\n        }\n        \n        console.log(this.state);\n        return (\n            <div></div>\n\n        )\n\n    }\n\n    getData(){\n        var xhr = new XMLHttpRequest();\n        let urlCinema = \"https://api.internationalshowtimes.com/v4/movies/?countries=SG&apikey=\" + this.state.apikeyIS;\n        xhr.addEventListener('load', () => {\n            var resp = JSON.parse(xhr.responseText);\n            this.setState({\n                movie_arr: resp.movies,\n            }, ()=>{\n                this.getTop5Movies();\n            });\n        })\n\n        xhr.open('GET', urlCinema);\n        xhr.send();\n    }\n\n    getTop5Movies(){\n        var movie_arr = this.state.movie_arr;\n        var toptreshhold = 6;\n        var result = new Array();\n\n        for(let i = 0; i < movie_arr.length; i++){\n            var movie = movie_arr[i];\n            var omdbdetails = this.getIMDBId(movie);\n\n            if(omdbdetails.imdbRating){\n                if(omdbdetails.imdbRating >= toptreshhold){\n                    result.push(movie_arr[i]);\n                }\n            }\n            \n            if(result.length >5){\n                break;\n            }\n            \n        }\n\n        this.setState({\n            top_rated_movies: result,\n        })\n\n    }\n\n\n    getIMDBId(movie) {\n        var movie_omdb_details = '';\n        var movie_id = this.state.movie_is_details.id;\n        var xhr = new XMLHttpRequest();\n        let urlmoviedetails = \"https://api.internationalshowtimes.com/v4/movies/\" + movie_id + \"?fields=imdb_id&apikey=\" + this.state.apikeyIS;\n\n        xhr.addEventListener('load', () => {\n            // update the state of the component with the result here\n            var resp = JSON.parse(xhr.responseText);\n            var imdb_id = resp.movie.imdb_id\n\n            var xhr2 = new XMLHttpRequest()\n\n            //get movie details from imdb\n            let urlMovieDetails = \"http://www.omdbapi.com/?i=\" + imdb_id + \"&apikey=\" + this.state.apikeyOMDB;\n            xhr2.addEventListener('load', () => {\n                var resp = JSON.parse(xhr2.responseText);\n                movie_omdb_details = resp;\n\n            })\n            xhr2.open('GET', urlMovieDetails)\n            xhr2.send()\n\n        })\n        xhr.open('GET', urlmoviedetails)\n        xhr.send()\n\n        return movie_omdb_details;\n    }\n\n}\n\nexport default RecommendMovies;"]},"metadata":{},"sourceType":"module"}