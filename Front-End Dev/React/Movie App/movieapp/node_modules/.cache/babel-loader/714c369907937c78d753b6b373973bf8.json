{"ast":null,"code":"var _jsxFileName = \"/Users/syukrirahiman/OneDrive - Singapore Management University/React/WebApp2 Movie App Group 7/movieapp/src/NowShowing.js\";\nimport React from 'react';\nimport { Table, Jumbotron, Container, Row, Col, Button, Pagination } from 'react-bootstrap';\nimport { Redirect } from 'react-router';\nimport { Link } from 'react-router-dom';\n\nclass NowShowing extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      apikeyIS: '7UiR6NYdJicQiXms2GOxJSqBddHXuivw',\n      movie_arr: [],\n      selected_movie: '',\n      redirect: false,\n      counter: 0\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n  }\n\n  componentDidMount() {\n    this.getData();\n  }\n\n  handleChange(event) {\n    const target = event.target;\n    const value = target.value;\n    console.log(value);\n    const movie = this.state.movie_arr[value];\n    this.setState({\n      selected_movie: movie,\n      redirect: false\n    });\n  }\n\n  handleClick(index) {\n    console.log(index);\n    const movie = this.state.movie_arr[index];\n    console.log(this.state.movie_arr);\n    console.log(movie);\n    this.setState({\n      selected_movie: movie,\n      redirect: true\n    });\n  }\n\n  displayMovie() {\n    var movie_arr = this.state.movie_arr;\n    let row = [],\n        col = [];\n\n    for (let i = 0; i < movie_arr.length; i++) {\n      var movie = movie_arr[i];\n      col.push(React.createElement(Col, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, React.createElement(Link, {\n        onClick: () => this.handleClick(i),\n        style: {\n          color: 'black'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        style: {\n          width: \"184px\",\n          height: \"261px\"\n        },\n        src: movie.poster_image_thumbnail,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      })), React.createElement(\"figcaption\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, React.createElement(Link, {\n        onClick: () => this.handleClick(i),\n        style: {\n          color: 'black'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, movie.title))));\n\n      if ((i + 1) % 5 == 0) {\n        row.push(React.createElement(Row, {\n          style: {\n            marginTop: \"50px\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81\n          },\n          __self: this\n        }, col));\n        col = [];\n      }\n    }\n\n    return row;\n  }\n\n  render() {\n    if (this.state.redirect) {\n      console.log(this.state);\n      console.log(this.state.selected_movie);\n      return React.createElement(Redirect, {\n        push: true,\n        from: \"/\",\n        to: {\n          pathname: '/reviews',\n          state: {\n            selected_movie: this.state.selected_movie\n          }\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      });\n    }\n\n    const bold = {\n      fontWeight: 'bold'\n    };\n    const center = {\n      textAlign: 'center'\n    };\n    const centralize = {\n      margin: \"auto\",\n      width: \"100%\",\n      textAlign: 'center',\n      marginTop: \"50px\",\n      marginBottom: \"50px\"\n    };\n\n    if (this.state.movie_arr.length > 0) {\n      return React.createElement(Container, {\n        style: centralize,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, \"Now Showing\"), this.displayMovie());\n    }\n\n    return React.createElement(\"div\", {\n      className: \"table1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    });\n  }\n\n  getData() {\n    //in case api is down uncomment below\n    // var data = require('./backupjson/getallmoviesinternationalshowtime.json');\n    // this.setState({\n    //     movie_arr: data.movies,\n    // }, () => {\n    //     this.checkTitleNull()\n    // });\n    //api method\n    var xhr = new XMLHttpRequest();\n    let urlCinema = \"https://api.internationalshowtimes.com/v4/movies/?countries=SG&apikey=\" + this.state.apikeyIS;\n    xhr.addEventListener('load', () => {\n      var resp = JSON.parse(xhr.responseText);\n      this.setState({\n        movie_arr: resp.movies\n      }, () => {\n        this.checkTitleNull();\n      });\n    });\n    xhr.open('GET', urlCinema);\n    xhr.send();\n  }\n\n  checkTitleNull() {\n    var movie_arr = this.state.movie_arr;\n    var result = new Array();\n\n    for (let i = 0; i < movie_arr.length; i++) {\n      var movie = movie_arr[i];\n\n      if (movie.title != null) {\n        if (movie.poster_image_thumbnail == null) {\n          movie.poster_image_thumbnail = require(\"./img/defaultmovieposter.jpg\");\n        }\n\n        result.push(movie);\n      }\n    }\n\n    this.setState({\n      movie_arr: result\n    });\n  }\n\n}\n\nexport default NowShowing;","map":{"version":3,"sources":["/Users/syukrirahiman/OneDrive - Singapore Management University/React/WebApp2 Movie App Group 7/movieapp/src/NowShowing.js"],"names":["React","Table","Jumbotron","Container","Row","Col","Button","Pagination","Redirect","Link","NowShowing","Component","constructor","props","state","apikeyIS","movie_arr","selected_movie","redirect","counter","handleChange","bind","handleClick","componentDidMount","getData","event","target","value","console","log","movie","setState","index","displayMovie","row","col","i","length","push","color","width","height","poster_image_thumbnail","title","marginTop","render","pathname","bold","fontWeight","center","textAlign","centralize","margin","marginBottom","xhr","XMLHttpRequest","urlCinema","addEventListener","resp","JSON","parse","responseText","movies","checkTitleNull","open","send","result","Array","require"],"mappings":"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","sourcesContent":["import React from 'react';\n\nimport { Table, Jumbotron, Container, Row, Col, Button, Pagination } from 'react-bootstrap';\nimport { Redirect } from 'react-router';\nimport { Link } from 'react-router-dom';\n\n\nclass NowShowing extends React.Component {\n\n\n    constructor(props) {\n        super(props)\n        this.state = {\n            apikeyIS: '7UiR6NYdJicQiXms2GOxJSqBddHXuivw',\n            movie_arr: [],\n            selected_movie: '',\n            redirect: false,\n            counter: 0,\n        };\n        this.handleChange = this.handleChange.bind(this);\n        this.handleClick = this.handleClick.bind(this);\n    }\n\n    componentDidMount() {\n        this.getData();\n\n    }\n\n    handleChange(event) {\n\n        const target = event.target;\n        const value = target.value;\n        console.log(value)\n        const movie = this.state.movie_arr[value]\n\n        this.setState({\n            selected_movie: movie,\n            redirect: false,\n        });\n\n    }\n\n    handleClick(index) {\n        console.log(index);\n        const movie = this.state.movie_arr[index];\n        console.log(this.state.movie_arr)\n        console.log(movie)\n\n        this.setState({\n            selected_movie: movie,\n            redirect: true,\n        });\n\n\n    }\n\n    displayMovie() {\n        var movie_arr = this.state.movie_arr;\n\n\n        let row = [],\n            col = [];\n\n        for (let i = 0; i < movie_arr.length; i++) {\n            var movie = movie_arr[i];\n            col.push(<Col>\n                <Link\n                    onClick={() => this.handleClick(i)}\n                    style={{ color: 'black' }}>\n                    <img style={{ width: \"184px\", height: \"261px\" }} src={movie.poster_image_thumbnail} />\n                </Link>\n                <figcaption>\n                    <Link\n                        onClick={() => this.handleClick(i)}\n                        style={{ color: 'black' }}>\n                        {movie.title}\n                    </Link>\n                </figcaption>\n            </Col>)\n            if ((i + 1) % 5 == 0) {\n                row.push(<Row style={{ marginTop: \"50px\" }}>\n                    {col}\n                </Row>\n                )\n                col = []\n            }\n        }\n\n        return row;\n\n    }\n\n\n    render() {\n        if (this.state.redirect) {\n            console.log(this.state);\n            console.log(this.state.selected_movie);\n            return (\n                <Redirect push from='/' to={{\n                    pathname: '/reviews',\n                    state: {\n                        selected_movie: this.state.selected_movie,\n                    }\n                }} />\n            )\n\n        }\n\n        const bold = {\n            fontWeight: 'bold',\n        };\n\n        const center = {\n            textAlign: 'center',\n        };\n        const centralize = {\n            margin: \"auto\",\n            width: \"100%\",\n            textAlign: 'center',\n            marginTop: \"50px\",\n            marginBottom: \"50px\"\n        };\n\n\n        if (this.state.movie_arr.length > 0) {\n\n            return (\n                <Container style={centralize}>\n                    <h1>Now Showing</h1>\n                    {this.displayMovie()}\n                </Container>\n            )\n        }\n        return (\n\n            <div className=\"table1\">\n            </div>\n\n        )\n\n    }\n\n\n\n    getData() {\n\n        //in case api is down uncomment below\n\n        // var data = require('./backupjson/getallmoviesinternationalshowtime.json');\n\n        // this.setState({\n        //     movie_arr: data.movies,\n        // }, () => {\n        //     this.checkTitleNull()\n        // });\n\n\n\n        //api method\n\n        var xhr = new XMLHttpRequest();\n        let urlCinema = \"https://api.internationalshowtimes.com/v4/movies/?countries=SG&apikey=\" + this.state.apikeyIS;\n        xhr.addEventListener('load', () => {\n            var resp = JSON.parse(xhr.responseText);\n            this.setState({\n                movie_arr: resp.movies,\n            }, () => {\n                this.checkTitleNull()\n            });\n        })\n\n        xhr.open('GET', urlCinema);\n        xhr.send();\n\n\n    }\n\n    checkTitleNull() {\n        var movie_arr = this.state.movie_arr;\n        var result = new Array();\n        for (let i = 0; i < movie_arr.length; i++) {\n            var movie = movie_arr[i];\n            if (movie.title != null) {\n                if (movie.poster_image_thumbnail == null) {\n                    movie.poster_image_thumbnail = require(\"./img/defaultmovieposter.jpg\")\n                }\n                result.push(movie)\n            }\n        }\n\n        this.setState({\n            movie_arr: result,\n        })\n    }\n\n\n}\n\nexport default NowShowing;"]},"metadata":{},"sourceType":"module"}