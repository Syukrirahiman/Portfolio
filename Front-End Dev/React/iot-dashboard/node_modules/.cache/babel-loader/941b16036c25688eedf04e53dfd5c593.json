{"ast":null,"code":"import _classCallCheck from\"/Users/syukrirahiman/OneDrive - Singapore Management University/React/iot-test/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/syukrirahiman/OneDrive - Singapore Management University/React/iot-test/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/syukrirahiman/OneDrive - Singapore Management University/React/iot-test/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/syukrirahiman/OneDrive - Singapore Management University/React/iot-test/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/syukrirahiman/OneDrive - Singapore Management University/React/iot-test/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/syukrirahiman/OneDrive - Singapore Management University/React/iot-test/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import'firebase/database';import*as firebase from'firebase/app';import{objectExpression}from'@babel/types';import\"./analysis.css\";import CanvasJSReact from'../assets/canvasjs.react';import{Link,Redirect}from'react-router-dom';import{Table,Jumbotron,Container,Row,Col,Button,Pagination}from'react-bootstrap';var CanvasJSChart=CanvasJSReact.CanvasJSChart;var beaconlist={\"c2af522362be\":\"Client A\",\"e20200bc8540\":\"Client B\"};var Analysis=/*#__PURE__*/function(_React$Component){_inherits(Analysis,_React$Component);function Analysis(props){var _this;_classCallCheck(this,Analysis);_this=_possibleConstructorReturn(this,_getPrototypeOf(Analysis).call(this,props));var beaconlist={\"c2af522362be\":\"Client A\",\"e20200bc8540\":\"Client B\"};var self=_assertThisInitialized(_this);_this.onClick=_this.onClick.bind(_assertThisInitialized(_this));_this.state={beaconlist:[{id:\"c2af522362be\",name:\"Client A\",timeLeftHistory:[],numberOfLeft:0,category:\"good\",numberOfLeftDuringOperatingHours:0},{id:\"e20200bc8540\",name:\"Client B\",timeLeftHistory:[],numberOfLeft:0,category:\"good\",numberOfLeftDuringOperatingHours:0}],data:'',periodTracker:{morning:0,noon:0,afternoon:0,nonOperatingHour:0},selectedBeacon:{},redirectToClient:false};return _this;}_createClass(Analysis,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var recentPostsRef=firebase.database().ref('/deployment');recentPostsRef.once('value').then(function(snapshot){// snapshot.val() is the dictionary with all your keys/values from the '/store' path\n_this2.setState({data:snapshot.val()},function(){_this2.generateClientData();});});}},{key:\"render\",value:function render(){console.log(this.state);if(this.state.redirectToClient){return React.createElement(Redirect,{push:true,from:\"/\",to:{pathname:'/client',state:{beacon:this.state.selectedBeacon}}});}if(this.state.data!=''){return React.createElement(\"div\",null,this.renderTables());}return React.createElement(\"div\",{style:{color:\"white\"}},React.createElement(\"h1\",null,\"Fetching data.... Please wait.  \"),React.createElement(\"div\",{className:\"loader\"}));}},{key:\"generateClientDataPoints\",value:function generateClientDataPoints(dataList){var result=new Array();for(var i=0;i<dataList.length;i++){var client=dataList[i];var clientObj={label:'',y:''};clientObj.label=client.name;clientObj.y=client.numberOfLeftDuringOperatingHours;result.push(clientObj);}return result;}},{key:\"onClick\",value:function onClick(e){// alert(  e.dataSeries.type + \", dataPoint { x:\" + e.dataPoint.x + \", y: \"+ e.dataPoint.y + \" }\" );\nvar name=e.dataPoint.label;var beaconlist=this.state.beaconlist;var selectedClient='';for(var i=0;i<beaconlist.length;i++){var beacon=beaconlist[i];var beaconName=beacon.name;if(name==beaconName){console.log(\"YAAS\");this.setState({redirectToClient:true,selectedBeacon:beacon});}}}},{key:\"renderClientTableChart\",value:function renderClientTableChart(){var dataList=this.state.beaconlist;var dataPoints=this.generateClientDataPoints(dataList);var options={axisY:{title:\"No. Of Time left\",includeZero:false// suffix: \"%\"\n},theme:\"light2\",// \"light1\", \"dark1\", \"dark2\"\ntitle:{text:\"Total number of times each client left\"},animationEnabled:true,data:[{click:this.onClick,type:\"column\",dataPoints:dataPoints}]};return React.createElement(\"div\",null,React.createElement(CanvasJSChart,{options:options/* onRef={ref => this.chart = ref} */}));}},{key:\"renderPeriodTableChart\",value:function renderPeriodTableChart(){var data=this.state.periodTracker;var options={// title: { text: \"Period Tracker\" },\naxisY:{title:\"No. Of Time left\",includeZero:false// suffix: \"%\"\n},theme:\"light2\",animationEnabled:true,data:[{type:\"column\",dataPoints:[{label:\"Morning (7.00 AM to 11.59 AM) \",y:data.morning},{label:\"Noon (12.00 PM to 2.59 PM)\",y:data.noon},{label:\"Afternoon (3.00 PM to 5.59 PM)\",y:data.afternoon}]}]};return React.createElement(\"div\",null,React.createElement(CanvasJSChart,{options:options/* onRef={ref => this.chart = ref} */}));}},{key:\"renderTables\",value:function renderTables(){return React.createElement(\"div\",{style:{color:\"white\",paddingBottom:\"20px\"}},React.createElement(Container,{style:{marginBottom:\"20px\"}},React.createElement(Row,null,React.createElement(Col,null,React.createElement(\"img\",{style:{width:\"190px\",height:\"190px\",marginRight:\"30px\",marginLeft:\"30px\"},src:require(\"./img/BEARCONS.png\")})))),React.createElement(\"div\",null,React.createElement(\"h3\",null,\"Client List\"),React.createElement(Table,{striped:true,bordered:true,hover:true,variant:\"dark\"},React.createElement(\"table\",{style:{marginLeft:\"auto\",marginRight:\"auto\",width:\"100%\"}},React.createElement(\"thead\",null,React.createElement(\"tr\",null,React.createElement(\"th\",null,\"Name\"),React.createElement(\"th\",null,\"ID\"),React.createElement(\"th\",null,\"No. of Times Left\"),React.createElement(\"th\",null,\"Category\"))),React.createElement(\"tbody\",null,this.renderTableData()))),this.renderClientTableChart()),React.createElement(\"br\",null),React.createElement(\"hr\",{style:{color:\"white\",backgroundColor:\"white\",height:1}}),React.createElement(\"br\",null),React.createElement(\"div\",{style:{marginLeft:\"auto\",marginRight:\"auto\",marginTop:\"20px\"}},React.createElement(\"h3\",null,\"Number of Times Clients Left During:\"),React.createElement(Table,{striped:true,bordered:true,hover:true,variant:\"dark\"},React.createElement(\"table\",{style:{marginLeft:\"auto\",marginRight:\"auto\"}},React.createElement(\"thead\",null,React.createElement(\"tr\",null,React.createElement(\"th\",null,React.createElement(\"div\",null,\"Morning\"),\" (7.00 AM to 11.59 AM) \"),React.createElement(\"th\",null,React.createElement(\"div\",null,\"Noon\"),\" (12.00 PM to 2.59 PM)\"),React.createElement(\"th\",null,React.createElement(\"div\",null,\"Afternoon\"),\" (3.00 PM to 5.59 PM)\"),React.createElement(\"th\",null,React.createElement(\"div\",null,\"Non-Operating Hours\"),\" (6.00 PM Onwards)\"))),React.createElement(\"tbody\",null,this.renderTablePeriodData()))),this.renderPeriodTableChart()));}},{key:\"renderTableData\",value:function renderTableData(){return this.state.beaconlist.map(function(value,index){var id=value.id,category=value.category,name=value.name,numberOfLeft=value.numberOfLeft,numberOfLeftDuringOperatingHours=value.numberOfLeftDuringOperatingHours,timeLeftHistory=value.timeLeftHistory;//destructuring\n// var d = JSON.parse(lastSeen)\n// var x = new Date(d);\n// console.log(x);\nreturn React.createElement(\"tr\",{key:id},React.createElement(\"td\",null,name),React.createElement(\"td\",null,id),React.createElement(\"td\",null,numberOfLeftDuringOperatingHours),React.createElement(\"td\",null,category));});}},{key:\"renderTablePeriodData\",value:function renderTablePeriodData(){var periodTrackerObj=this.state.periodTracker;return React.createElement(\"tr\",null,React.createElement(\"td\",null,periodTrackerObj.morning),React.createElement(\"td\",null,periodTrackerObj.noon),React.createElement(\"td\",null,periodTrackerObj.afternoon),React.createElement(\"td\",null,periodTrackerObj.nonOperatingHour));}},{key:\"generateClientData\",value:function generateClientData(){var _this3=this;console.log(this.state.beaconlist);var data=this.state.data;var beaconlist=this.state.beaconlist;var entries=Object.entries(data);// console.log(entries)\n// var updateBeaconList = new Array();\nfor(var i=0;i<entries.length;i++){// console.log(data[i]);\nvar data=entries[i][1];// to geth the object of beacons and its value\nconsole.log(data);for(var j=0;j<beaconlist.length;j++){console.log(data);//value of current beaconin the beaconlist\nvar beacon=beaconlist[j];var currObj={id:beacon.id,name:beacon.name,timeLeftHistory:beacon.timeLeftHistory,numberOfLeft:beacon.numberOfLeft,category:beacon.category,numberOfLeftDuringOperatingHours:beacon.numberOfLeftDuringOperatingHours};var beaconid=beacon.id;console.log(beaconid);var timeLeftHistory=beacon.timeLeftHistory;// array of timeLeftHistory\nvar noOfLeft=beacon.numberOfLeft;// var t = \"e20200bc8540\";\n//value of beacon from data in firebase\nvar beaconData=data[beaconid];console.log(beaconData);var lastSeenData=beaconData.lastSeen;var statusMsgData=beaconData.statusMsg;if(!timeLeftHistory.includes(lastSeenData)){if(statusMsgData==\"left\"){noOfLeft+=1;timeLeftHistory.push(lastSeenData);console.log(noOfLeft);console.log(\"yes\");}}currObj.timeLeftHistory=timeLeftHistory;currObj.numberOfLeft=noOfLeft;currObj.numberOfLeftDuringOperatingHours=noOfLeft;console.log(currObj.numberOfLeft);beaconlist[j]=currObj;}}this.setState({beaconlist:beaconlist},function(){_this3.generatePeriodTrackerData();});}},{key:\"generatePeriodTrackerData\",value:function generatePeriodTrackerData(){var beaconlist=this.state.beaconlist;var periodTracker=this.state.periodTracker;for(var i=0;i<beaconlist.length;i++){var beacon=beaconlist[i];var timeLeftHistory=beacon.timeLeftHistory;// var numberOfLeftDuringOperatingHours = beacon.numberOfLeftDuringOperatingHours;\nvar numberOfLeftDuringNonOperatinghours=0;for(var j=0;j<timeLeftHistory.length;j++){var datetimestr=JSON.parse(timeLeftHistory[j]);var datetime=new Date(datetimestr);var time=datetime.toLocaleTimeString();console.log(time);//set opening and closing time\nvar closing=\"18:00:00\";var closingDate=Date.parse(\"01/01/2011 \"+closing);var opening=\"07:00:00\";var openingDate=Date.parse(\"01/01/2011 \"+opening);var noon=\"12:00:00\";var noonDate=Date.parse('01/01/2011 '+noon);var afternoon=\"15:00:00\";var afternoonDate=Date.parse(\"01/01/2011 \"+afternoon);var timeDate=Date.parse(\"01/01/2011 \"+time);if(timeDate>=openingDate&&timeDate<closingDate){if(timeDate<noonDate){periodTracker.morning+=1;}else if(timeDate<afternoonDate){periodTracker.noon+=1;}else{periodTracker.afternoon+=1;}}else{periodTracker.nonOperatingHour+=1;numberOfLeftDuringNonOperatinghours+=1;}}beacon.numberOfLeftDuringOperatingHours-=numberOfLeftDuringNonOperatinghours;//update their cateogry\nif(beacon.numberOfLeftDuringOperatingHours<1){beacon.category=\"Low Risk\";}else if(beacon.numberOfLeftDuringOperatingHours<2){beacon.category=\"Medium Risk\";}else{beacon.category=\"High Risk\";}beaconlist[i]=beacon;}this.setState({periodTracker:periodTracker,beaconlist:beaconlist});}}]);return Analysis;}(React.Component);export default Analysis;","map":{"version":3,"sources":["/Users/syukrirahiman/OneDrive - Singapore Management University/React/iot-test/src/components/analysis.js"],"names":["React","Component","firebase","objectExpression","CanvasJSReact","Link","Redirect","Table","Jumbotron","Container","Row","Col","Button","Pagination","CanvasJSChart","beaconlist","Analysis","props","self","onClick","bind","state","id","name","timeLeftHistory","numberOfLeft","category","numberOfLeftDuringOperatingHours","data","periodTracker","morning","noon","afternoon","nonOperatingHour","selectedBeacon","redirectToClient","recentPostsRef","database","ref","once","then","snapshot","setState","val","generateClientData","console","log","pathname","beacon","renderTables","color","dataList","result","Array","i","length","client","clientObj","label","y","push","e","dataPoint","selectedClient","beaconName","dataPoints","generateClientDataPoints","options","axisY","title","includeZero","theme","text","animationEnabled","click","type","paddingBottom","marginBottom","width","height","marginRight","marginLeft","require","renderTableData","renderClientTableChart","backgroundColor","marginTop","renderTablePeriodData","renderPeriodTableChart","map","value","index","periodTrackerObj","entries","Object","j","currObj","beaconid","noOfLeft","beaconData","lastSeenData","lastSeen","statusMsgData","statusMsg","includes","generatePeriodTrackerData","numberOfLeftDuringNonOperatinghours","datetimestr","JSON","parse","datetime","Date","time","toLocaleTimeString","closing","closingDate","opening","openingDate","noonDate","afternoonDate","timeDate"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport 'firebase/database';\nimport * as firebase from 'firebase/app'\nimport { objectExpression } from '@babel/types';\nimport \"./analysis.css\"\nimport CanvasJSReact from '../assets/canvasjs.react';\nimport { Link, Redirect } from 'react-router-dom';\nimport { Table, Jumbotron, Container, Row, Col, Button, Pagination } from 'react-bootstrap';\n\nvar CanvasJSChart = CanvasJSReact.CanvasJSChart\n\nconst beaconlist = { \"c2af522362be\": \"Client A\", \"e20200bc8540\": \"Client B\" }\nclass Analysis extends React.Component {\n    constructor(props) {\n        super(props)\n        const beaconlist = { \"c2af522362be\": \"Client A\", \"e20200bc8540\": \"Client B\" }\n        var self = this;\n        this.onClick = this.onClick.bind(this);\n\n        this.state = {\n            beaconlist: [\n                {\n                    id: \"c2af522362be\",\n                    name: \"Client A\",\n                    timeLeftHistory: [],\n                    numberOfLeft: 0,\n                    category: \"good\",\n                    numberOfLeftDuringOperatingHours: 0,\n                },\n                {\n                    id: \"e20200bc8540\",\n                    name: \"Client B\",\n                    timeLeftHistory: [],\n                    numberOfLeft: 0,\n                    category: \"good\",\n                    numberOfLeftDuringOperatingHours: 0,\n                }\n            ],\n            data: '',\n            periodTracker: {\n                morning: 0,\n                noon: 0,\n                afternoon: 0,\n                nonOperatingHour: 0,\n\n            },\n            selectedBeacon: {},\n            redirectToClient: false,\n        }\n\n\n\n    }\n    componentDidMount() {\n        var recentPostsRef = firebase.database().ref('/deployment');\n        recentPostsRef.once('value').then(snapshot => {\n            // snapshot.val() is the dictionary with all your keys/values from the '/store' path\n            this.setState({\n                data: snapshot.val()\n            }, () => {\n\n                this.generateClientData();\n            })\n        });\n\n    }\n\n    render() {\n\n        console.log(this.state)\n\n        if (this.state.redirectToClient) {\n            return (\n                <Redirect push from='/' to={{\n                    pathname: '/client',\n                    state: {\n                        beacon: this.state.selectedBeacon,\n                    }\n                }} />\n            )\n        }\n\n        if (this.state.data != '') {\n            return (\n                <div>\n                    {this.renderTables()}\n                </div>\n            )\n        }\n\n        return (\n\n            <div style={{ color: \"white\" }}>\n                <h1>Fetching data.... Please wait.  </h1>\n                <div className=\"loader\"></div>\n            </div>\n\n        )\n\n    }\n\n\n\n    generateClientDataPoints(dataList) {\n        var result = new Array();\n        for (let i = 0; i < dataList.length; i++) {\n            var client = dataList[i];\n            var clientObj = { label: '', y: '' };\n            clientObj.label = client.name;\n            clientObj.y = client.numberOfLeftDuringOperatingHours;\n            result.push(clientObj);\n        }\n\n        return result;\n\n    }\n\n    onClick(e) {\n        // alert(  e.dataSeries.type + \", dataPoint { x:\" + e.dataPoint.x + \", y: \"+ e.dataPoint.y + \" }\" );\n        var name = e.dataPoint.label;\n        var beaconlist = this.state.beaconlist;\n        var selectedClient = '';\n        for (let i = 0; i < beaconlist.length; i++) {\n            var beacon = beaconlist[i];\n            var beaconName = beacon.name;\n            if (name == beaconName) {\n                console.log(\"YAAS\")\n                this.setState({\n                    redirectToClient: true,\n                    selectedBeacon: beacon,\n                })\n\n\n            }\n        }\n\n    }\n    renderClientTableChart() {\n        var dataList = this.state.beaconlist\n        var dataPoints = this.generateClientDataPoints(dataList);\n        const options = {\n            axisY: {\n                title: \"No. Of Time left\",\n                includeZero: false,\n                // suffix: \"%\"\n            },\n            theme: \"light2\",    // \"light1\", \"dark1\", \"dark2\"\n            title: { text: \"Total number of times each client left\" },\n            animationEnabled: true,\n            data: [\n                {\n                    click: this.onClick,\n                    type: \"column\",\n                    dataPoints: dataPoints,\n                }\n            ]\n        }\n\n        return (\n            <div>\n                {/* <h1>React Column Chart</h1> */}\n                <CanvasJSChart options={options}\n                /* onRef={ref => this.chart = ref} */\n                />\n                {/*You can get reference to the chart instance as shown above using onRef. This allows you to access all chart properties and methods*/}\n            </div>\n\n        )\n    }\n\n    renderPeriodTableChart() {\n        var data = this.state.periodTracker\n        const options = {\n            // title: { text: \"Period Tracker\" },\n            axisY: {\n                title: \"No. Of Time left\",\n                includeZero: false,\n                // suffix: \"%\"\n            },\n            theme: \"light2\", \n       \n            animationEnabled: true,\n            data: [\n                {\n                    type: \"column\",\n                    dataPoints: [\n                        { label: \"Morning (7.00 AM to 11.59 AM) \", y: data.morning },\n                        { label: \"Noon (12.00 PM to 2.59 PM)\", y: data.noon },\n                        { label: \"Afternoon (3.00 PM to 5.59 PM)\", y: data.afternoon },\n                    ]\n                }\n            ]\n        }\n\n        return (\n            <div>\n                {/* <h1>React Column Chart</h1> */}\n                <CanvasJSChart options={options}\n                /* onRef={ref => this.chart = ref} */\n                />\n                {/*You can get reference to the chart instance as shown above using onRef. This allows you to access all chart properties and methods*/}\n            </div>\n\n        )\n    }\n\n    renderTables() {\n\n        return (\n\n            <div style={{ color: \"white\", paddingBottom: \"20px\" }}>\n\n<Container style ={{marginBottom:\"20px\"}}>\n                <Row>\n                   <Col>\n                \n                   <img style={{ width: \"190px\", height: \"190px\",marginRight:\"30px\", marginLeft:\"30px\" }} src={require(\"./img/BEARCONS.png\")}/>\n\n                   </Col>\n                </Row>\n             </Container>\n                <div>\n                    <h3>Client List</h3>\n\n                    <Table striped bordered hover variant=\"dark\"  >\n                        <table style={{ marginLeft: \"auto\", marginRight: \"auto\", width: \"100%\" }}>\n                            <thead>\n                                <tr>\n                                    <th>Name</th>\n                                    <th>ID</th>\n                                    <th>No. of Times Left</th>\n                                    <th>Category</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                {/* <tr>{this.renderTableHeader()}</tr> */}\n\n                                {this.renderTableData()}\n                            </tbody>\n                        </table>\n\n                    </Table>\n\n                    {this.renderClientTableChart()}\n                </div>\n\n\n\n\n                <br></br>\n            \n                <hr\n                    style={{\n                        color: \"white\",\n                        backgroundColor: \"white\",\n                        height: 1\n                    }}\n                />\n                <br></br>\n                <div style={{ marginLeft: \"auto\", marginRight: \"auto\", marginTop: \"20px\" }}>\n                    <h3>Number of Times Clients Left During:</h3>\n                    <Table striped bordered hover variant=\"dark\"  >\n                        <table style={{ marginLeft: \"auto\", marginRight: \"auto\" }}>\n                            <thead>\n                                {/* <tr>{this.renderTableHeader()}</tr> */}\n                                <tr>\n                                    <th><div>Morning</div> (7.00 AM to 11.59 AM) </th>\n                                    <th><div>Noon</div> (12.00 PM to 2.59 PM)</th>\n                                    <th><div>Afternoon</div> (3.00 PM to 5.59 PM)</th>\n                                    <th><div>Non-Operating Hours</div> (6.00 PM Onwards)</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                {this.renderTablePeriodData()}\n                            </tbody>\n                        </table>\n                    </Table>\n                    {this.renderPeriodTableChart()}\n                </div>\n\n\n            </div>\n\n        )\n\n    }\n\n    renderTableData() {\n\n        return this.state.beaconlist.map((value, index) => {\n            const { id, category, name, numberOfLeft, numberOfLeftDuringOperatingHours, timeLeftHistory } = value //destructuring\n            // var d = JSON.parse(lastSeen)\n            // var x = new Date(d);\n            // console.log(x);\n\n            return (\n                <tr key={id}>\n                    <td>{name}</td>\n                    <td>{id}</td>\n                    <td>{numberOfLeftDuringOperatingHours}</td>\n                    <td>{category}</td>\n                </tr>\n            )\n        })\n    }\n\n\n    renderTablePeriodData() {\n\n        var periodTrackerObj = this.state.periodTracker;\n\n\n        return (\n            <tr>\n                <td>{periodTrackerObj.morning}</td>\n                <td>{periodTrackerObj.noon}</td>\n                <td>{periodTrackerObj.afternoon}</td>\n                <td>{periodTrackerObj.nonOperatingHour}</td>\n            </tr>\n        )\n\n    }\n\n\n    generateClientData() {\n        console.log(this.state.beaconlist);\n        var data = this.state.data;\n\n        var beaconlist = this.state.beaconlist;\n\n        var entries = Object.entries(data)\n\n\n\n\n        // console.log(entries)\n\n        // var updateBeaconList = new Array();\n\n        for (let i = 0; i < entries.length; i++) {\n            // console.log(data[i]);\n\n            var data = entries[i][1] // to geth the object of beacons and its value\n            console.log(data);\n\n\n            for (let j = 0; j < beaconlist.length; j++) {\n                console.log(data)\n\n                //value of current beaconin the beaconlist\n                var beacon = beaconlist[j];\n\n                var currObj = {\n                    id: beacon.id,\n                    name: beacon.name,\n                    timeLeftHistory: beacon.timeLeftHistory,\n                    numberOfLeft: beacon.numberOfLeft,\n                    category: beacon.category,\n                    numberOfLeftDuringOperatingHours: beacon.numberOfLeftDuringOperatingHours,\n                }\n\n                var beaconid = beacon.id;\n                console.log(beaconid)\n                var timeLeftHistory = beacon.timeLeftHistory; // array of timeLeftHistory\n\n                var noOfLeft = beacon.numberOfLeft;\n\n                // var t = \"e20200bc8540\";\n\n                //value of beacon from data in firebase\n                var beaconData = data[beaconid];\n                console.log(beaconData)\n                var lastSeenData = beaconData.lastSeen;\n                var statusMsgData = beaconData.statusMsg;\n\n                if (!(timeLeftHistory.includes(lastSeenData))) {\n                    if (statusMsgData == \"left\") {\n                        noOfLeft += 1;\n                        timeLeftHistory.push(lastSeenData);\n                        console.log(noOfLeft);\n                        console.log(\"yes\")\n                    }\n                }\n\n\n\n                currObj.timeLeftHistory = timeLeftHistory;\n                currObj.numberOfLeft = noOfLeft;\n                currObj.numberOfLeftDuringOperatingHours = noOfLeft;\n\n\n                console.log(currObj.numberOfLeft)\n\n                beaconlist[j] = currObj\n\n            }\n\n        }\n\n        this.setState({\n            beaconlist: beaconlist,\n        }, () => {\n            this.generatePeriodTrackerData();\n        })\n    }\n\n\n    generatePeriodTrackerData() {\n        var beaconlist = this.state.beaconlist;\n        var periodTracker = this.state.periodTracker;\n\n\n\n        for (let i = 0; i < beaconlist.length; i++) {\n            var beacon = beaconlist[i];\n            var timeLeftHistory = beacon.timeLeftHistory;\n            // var numberOfLeftDuringOperatingHours = beacon.numberOfLeftDuringOperatingHours;\n            var numberOfLeftDuringNonOperatinghours = 0;\n\n            for (let j = 0; j < timeLeftHistory.length; j++) {\n                var datetimestr = JSON.parse(timeLeftHistory[j]);\n                var datetime = new Date(datetimestr);\n                var time = datetime.toLocaleTimeString();\n                console.log(time)\n\n\n                //set opening and closing time\n                var closing = \"18:00:00\";\n                var closingDate = Date.parse(\"01/01/2011 \" + closing);\n                var opening = \"07:00:00\";\n                var openingDate = Date.parse(\"01/01/2011 \" + opening);\n\n                var noon = \"12:00:00\";\n                var noonDate = Date.parse('01/01/2011 ' + noon)\n                var afternoon = \"15:00:00\";\n                var afternoonDate = Date.parse(\"01/01/2011 \" + afternoon);\n\n                var timeDate = Date.parse(\"01/01/2011 \" + time);\n\n                if (timeDate >= openingDate && timeDate < closingDate) {\n                    if (timeDate < noonDate) {\n                        periodTracker.morning += 1;\n                    } else if (timeDate < afternoonDate) {\n                        periodTracker.noon += 1;\n                    } else {\n                        periodTracker.afternoon += 1;\n                    }\n\n                } else {\n                    periodTracker.nonOperatingHour += 1;\n                    numberOfLeftDuringNonOperatinghours += 1\n\n                }\n            }\n\n\n            beacon.numberOfLeftDuringOperatingHours -= numberOfLeftDuringNonOperatinghours;\n\n            //update their cateogry\n            if (beacon.numberOfLeftDuringOperatingHours < 1) {\n                beacon.category = \"Low Risk\"\n            } else if (beacon.numberOfLeftDuringOperatingHours < 2) {\n                beacon.category = \"Medium Risk\"\n            } else {\n                beacon.category = \"High Risk\"\n            }\n\n            beaconlist[i] = beacon;\n\n        }\n\n        this.setState({\n            periodTracker: periodTracker,\n            beaconlist: beaconlist,\n        })\n    }\n\n}\n\nexport default Analysis"]},"metadata":{},"sourceType":"module"}