{"ast":null,"code":"var _jsxFileName = \"/Users/syukrirahiman/OneDrive - Singapore Management University/React/iot-test/src/components/Tables/tablesSystem.js\";\nimport React, { Component } from 'react';\nimport 'firebase/database';\nimport * as firebase from 'firebase/app';\nimport { Table, Jumbotron, Container, Row, Col, Button, Pagination } from 'react-bootstrap';\nconst beaconlist = {\n  \"c2af522362be\": \"Client A\",\n  \"e20200bc8540\": \"Client B\"\n};\nconst imagelist = {\n  \"c2af522362be\": require(\".././img/clienta.png\"),\n  \"e20200bc8540\": require(\".././img/clienta.png\")\n};\n\nclass TableDashboardSystem extends React.Component {\n  constructor(props) {\n    super(props);\n    const beaconlist = {\n      \"c2af522362be\": \"Client A\",\n      \"e20200bc8540\": \"Client B\"\n    };\n    var self = this;\n    const rootRef = firebase.database().ref();\n    const beaconRef = rootRef.child('deployment').orderByChild(\"dateAdded\"); //sort by timestamp\n\n    const tableval = beaconRef.limitToLast(1).on('child_added', function (snapshot) {\n      var data = snapshot.val();\n      console.log(data);\n      console.log(beaconlist[0]);\n      var beacon_1 = data[Object.keys(beaconlist)[0]];\n      var beacon_2 = data[Object.keys(beaconlist)[1]];\n      var dateAddedString = data.dateAdded;\n      console.log(beacon_1);\n      self.setState({\n        beaconArray: [{\n          id: beacon_1.id,\n          lastSeen: beacon_1.lastSeen,\n          rssi_da1: beacon_1.rssi_da1,\n          lastSeen_da1: beacon_1.lastSeen_da1,\n          rssi_ma1: beacon_1.rssi_ma1,\n          last_seen_ma1: beacon_1.last_seen_ma1,\n          rssi_r1: beacon_1.rssi_r1,\n          last_seen_r1: beacon_1.last_seen_r1,\n          statusMsg: beacon_1.statusMsg\n        }, {\n          id: beacon_2.id,\n          lastSeen: beacon_2.lastSeen,\n          rssi_da1: beacon_2.rssi_da1,\n          lastSeen_da1: beacon_2.lastSeen_da1,\n          rssi_ma1: beacon_2.rssi_ma1,\n          last_seen_ma1: beacon_2.last_seen_ma1,\n          rssi_r1: beacon_2.rssi_r1,\n          last_seen_r1: beacon_2.last_seen_r1,\n          statusMsg: beacon_2.statusMsg\n        }],\n        dateAddedString: dateAddedString\n      });\n    });\n    this.state = {\n      beaconArray: []\n    };\n  }\n\n  renderTableHeader() {\n    let header = Object.keys(this.state.beaconArray);\n    return header.map((key, index) => {\n      return React.createElement(\"th\", {\n        key: index,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, key.toUpperCase());\n    });\n  }\n\n  renderTableData() {\n    var beaconArray = this.state.beaconArray;\n    console.log(beaconArray);\n    var latest_da1 = JSON.parse(beaconArray[0].lastSeen_da1);\n    var latest_ma1 = JSON.parse(beaconArray[0].last_seen_ma1);\n    var latest_r1 = JSON.parse(beaconArray[0].last_seen_r1);\n    var dateAddedString = JSON.parse(this.state.dateAddedString);\n\n    for (let i = 1; i < beaconArray.length; i++) {\n      var current_da1 = JSON.parse(beaconArray[i].lastSeen_da1);\n      var current_ma1 = JSON.parse(beaconArray[i].last_seen_ma1);\n      var current_r1 = JSON.parse(beaconArray[i].last_seen_r1);\n\n      if (new Date(current_da1) > new Date(latest_da1)) {\n        latest_da1 = current_da1;\n      }\n\n      if (new Date(current_ma1) > new Date(latest_ma1)) {\n        latest_ma1 = current_ma1;\n      }\n\n      if (new Date(current_r1) > new Date(latest_r1)) {\n        latest_r1 = current_r1;\n      }\n    }\n\n    return React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, \"Gateway\"), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, new Date(dateAddedString).toString().substring(0, 25)), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, this.diff_hours(new Date(dateAddedString)))); // <td>{new Date(latest_da1).toString().substring(0, 25)}</td>\n    // <td>{new Date(latest_r1).toString().substring(0, 25)}</td>\n    // <td>{new Date(latest_ma1).toString().substring(0, 25)}</td>\n  }\n\n  checkStatusGateway(hrs) {\n    if (hrs * 60 > 1) {\n      return \"Might be turned off\\n or \\nrequires maintenance\";\n    }\n\n    return \"Device is working\";\n  }\n\n  renderTableData2() {\n    var beaconArray = this.state.beaconArray;\n    console.log(beaconArray);\n    var latest_da1 = JSON.parse(beaconArray[0].lastSeen_da1);\n    var latest_ma1 = JSON.parse(beaconArray[0].last_seen_ma1);\n    var latest_r1 = JSON.parse(beaconArray[0].last_seen_r1);\n    var dateAddedString = JSON.parse(this.state.dateAddedString);\n\n    for (let i = 1; i < beaconArray.length; i++) {\n      var current_da1 = JSON.parse(beaconArray[i].lastSeen_da1);\n      var current_ma1 = JSON.parse(beaconArray[i].last_seen_ma1);\n      var current_r1 = JSON.parse(beaconArray[i].last_seen_r1);\n\n      if (new Date(current_da1) > new Date(latest_da1)) {\n        latest_da1 = current_da1;\n      }\n\n      if (new Date(current_ma1) > new Date(latest_ma1)) {\n        latest_ma1 = current_ma1;\n      }\n\n      if (new Date(current_r1) > new Date(latest_r1)) {\n        latest_r1 = current_r1;\n      }\n    }\n\n    return React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, this.diff_hours(new Date(latest_da1)) + \" hr(s)\"), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, this.diff_hours(new Date(latest_r1)) + \" hr(s)\"), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, this.diff_hours(new Date(latest_ma1)) + \" hr(s)\"), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, this.diff_hours(new Date(dateAddedString)) + \" hr(s)\"));\n  }\n\n  diff_hours(date) {\n    var current = new Date(); // get total seconds between the times\n\n    var delta = Math.abs(current - date) / 1000; // calculate (and subtract) whole days\n\n    var days = Math.floor(delta / 86400);\n    delta -= days * 86400; // calculate (and subtract) whole hours\n\n    var hours = Math.floor(delta / 3600) % 24;\n    delta -= hours * 3600; // calculate (and subtract) whole minutes\n\n    var minutes = Math.floor(delta / 60) % 60;\n    delta -= minutes * 60; // what's left is seconds\n\n    var seconds = delta % 60; // in theory the modulus is not required\n\n    return days + \" Day \" + hours + \" Hr \" + minutes + \" Min \" + seconds + \" Sec \"; // var diff = (date.getTime() - current.getTime()) / 1000;\n    // diff /= (60 * 60);\n    // return Math.abs(Math.round(diff));\n  }\n\n  render() {\n    if (this.state.beaconArray.length > 0) {\n      return (\n        /* font-size: calc(10px + 2vmin); */\n        React.createElement(\"div\", {\n          style: {\n            marginTop: \"10px\",\n            paddingBottom: \"20px\",\n            fontSize: \"calc(10px + 2vmin)\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 211\n          },\n          __self: this\n        }, React.createElement(\"h1\", {\n          id: \"title\",\n          style: {\n            color: \"white\",\n            marginBottom: \"15px\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 221\n          },\n          __self: this\n        }, \"System Monitoring Dashboard\"), React.createElement(\"img\", {\n          style: {\n            width: \"700px\",\n            height: \"400px\",\n            marginLeft: \"10px\",\n            backgroundColor: \"White\"\n          },\n          src: require(\".././img/layout.jpg\"),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 222\n          },\n          __self: this\n        }), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 223\n          },\n          __self: this\n        }), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 224\n          },\n          __self: this\n        }, \"Latest Datetime Data Retrieved from Gateway: \", React.createElement(\"b\", {\n          style: {\n            color: \"OrangeRed\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 224\n          },\n          __self: this\n        }, new Date(JSON.parse(this.state.dateAddedString)).toString().substring(0, 25))), React.createElement(\"hr\", {\n          style: {\n            color: \"white\",\n            backgroundColor: \"white\",\n            height: 1\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 225\n          },\n          __self: this\n        }), React.createElement(\"h3\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 235\n          },\n          __self: this\n        }, \"Device List\"), React.createElement(Table, {\n          striped: true,\n          bordered: true,\n          hover: true,\n          variant: \"dark\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 236\n          },\n          __self: this\n        }, React.createElement(\"table\", {\n          id: \"beacon\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 237\n          },\n          __self: this\n        }, React.createElement(\"thead\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 238\n          },\n          __self: this\n        }, React.createElement(\"tr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 240\n          },\n          __self: this\n        }, React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 241\n          },\n          __self: this\n        }, \"Device\"), React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 242\n          },\n          __self: this\n        }, \"Latest Data Timestamp\"), React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 243\n          },\n          __self: this\n        }, \"Amt of hr(s) since the last data\"), React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 244\n          },\n          __self: this\n        }, \"Status\"))), React.createElement(\"tbody\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 248\n          },\n          __self: this\n        }, this.renderTableData()))), React.createElement(\"h3\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 254\n          },\n          __self: this\n        }, \"Amount of duration each device has stopped sending data:\"), React.createElement(Table, {\n          striped: true,\n          bordered: true,\n          hover: true,\n          variant: \"dark\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 255\n          },\n          __self: this\n        }, React.createElement(\"thead\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 257\n          },\n          __self: this\n        }, React.createElement(\"tr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 259\n          },\n          __self: this\n        }, React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 260\n          },\n          __self: this\n        }, \"Receiver 1\"), React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 261\n          },\n          __self: this\n        }, \"Receiver 2\"), React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 262\n          },\n          __self: this\n        }, \"Receiver 3\"), React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 263\n          },\n          __self: this\n        }, \"Gateway\"))), React.createElement(\"tbody\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 267\n          },\n          __self: this\n        }, this.renderTableData2())))\n      );\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280\n      },\n      __self: this\n    });\n  }\n\n}\n\nexport default TableDashboardSystem;","map":{"version":3,"sources":["/Users/syukrirahiman/OneDrive - Singapore Management University/React/iot-test/src/components/Tables/tablesSystem.js"],"names":["React","Component","firebase","Table","Jumbotron","Container","Row","Col","Button","Pagination","beaconlist","imagelist","require","TableDashboardSystem","constructor","props","self","rootRef","database","ref","beaconRef","child","orderByChild","tableval","limitToLast","on","snapshot","data","val","console","log","beacon_1","Object","keys","beacon_2","dateAddedString","dateAdded","setState","beaconArray","id","lastSeen","rssi_da1","lastSeen_da1","rssi_ma1","last_seen_ma1","rssi_r1","last_seen_r1","statusMsg","state","renderTableHeader","header","map","key","index","toUpperCase","renderTableData","latest_da1","JSON","parse","latest_ma1","latest_r1","i","length","current_da1","current_ma1","current_r1","Date","toString","substring","diff_hours","checkStatusGateway","hrs","renderTableData2","date","current","delta","Math","abs","days","floor","hours","minutes","seconds","render","marginTop","paddingBottom","fontSize","color","marginBottom","width","height","marginLeft","backgroundColor"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport 'firebase/database';\nimport * as firebase from 'firebase/app'\nimport { Table, Jumbotron, Container, Row, Col, Button, Pagination } from 'react-bootstrap';\n\nconst beaconlist = { \"c2af522362be\": \"Client A\", \"e20200bc8540\": \"Client B\" }\nconst imagelist = { \"c2af522362be\": require(\".././img/clienta.png\"), \"e20200bc8540\": require(\".././img/clienta.png\") }\nclass TableDashboardSystem extends React.Component {\n   constructor(props) {\n      super(props)\n      const beaconlist = { \"c2af522362be\": \"Client A\", \"e20200bc8540\": \"Client B\" }\n      var self = this;\n      const rootRef = firebase.database().ref();\n      const beaconRef = rootRef.child('deployment').orderByChild(\"dateAdded\");\n      //sort by timestamp\n      const tableval = beaconRef.limitToLast(1).on('child_added', function (snapshot) {\n         var data = snapshot.val();\n\n         console.log(data);\n         console.log(beaconlist[0]);\n         var beacon_1 = data[Object.keys(beaconlist)[0]];\n         var beacon_2 = data[Object.keys(beaconlist)[1]];\n         var dateAddedString = data.dateAdded;\n         console.log(beacon_1);\n\n\n         self.setState({\n            beaconArray: [\n               {\n                  id: beacon_1.id,\n                  lastSeen: beacon_1.lastSeen,\n                  rssi_da1: beacon_1.rssi_da1,\n                  lastSeen_da1: beacon_1.lastSeen_da1,\n                  rssi_ma1: beacon_1.rssi_ma1,\n                  last_seen_ma1: beacon_1.last_seen_ma1,\n                  rssi_r1: beacon_1.rssi_r1,\n                  last_seen_r1: beacon_1.last_seen_r1,\n                  statusMsg: beacon_1.statusMsg,\n               },\n\n               {\n                  id: beacon_2.id,\n                  lastSeen: beacon_2.lastSeen,\n                  rssi_da1: beacon_2.rssi_da1,\n                  lastSeen_da1: beacon_2.lastSeen_da1,\n                  rssi_ma1: beacon_2.rssi_ma1,\n                  last_seen_ma1: beacon_2.last_seen_ma1,\n                  rssi_r1: beacon_2.rssi_r1,\n                  last_seen_r1: beacon_2.last_seen_r1,\n                  statusMsg: beacon_2.statusMsg\n               }\n\n            ],\n            dateAddedString: dateAddedString,\n\n         })\n\n      });\n\n      this.state = {\n         beaconArray: []\n      }\n   }\n\n\n   renderTableHeader() {\n\n      let header = Object.keys(this.state.beaconArray)\n      return header.map((key, index) => {\n         return <th key={index}>{key.toUpperCase()}</th>\n      })\n   }\n\n   renderTableData() {\n      var beaconArray = this.state.beaconArray;\n      console.log(beaconArray)\n\n      var latest_da1 = JSON.parse(beaconArray[0].lastSeen_da1);\n      var latest_ma1 = JSON.parse(beaconArray[0].last_seen_ma1);\n      var latest_r1 = JSON.parse(beaconArray[0].last_seen_r1);\n      var dateAddedString = JSON.parse(this.state.dateAddedString);\n\n      for (let i = 1; i < beaconArray.length; i++) {\n\n         var current_da1 = JSON.parse(beaconArray[i].lastSeen_da1);\n         var current_ma1 = JSON.parse(beaconArray[i].last_seen_ma1);\n         var current_r1 = JSON.parse(beaconArray[i].last_seen_r1);\n\n\n         if (new Date(current_da1) > new Date(latest_da1)) {\n            latest_da1 = current_da1\n         }\n\n         if (new Date(current_ma1) > new Date(latest_ma1)) {\n            latest_ma1 = current_ma1\n         }\n\n         if (new Date(current_r1) > new Date(latest_r1)) {\n            latest_r1 = current_r1\n         }\n\n      }\n\n      return (\n         <tr>\n            <td>Gateway</td>\n            <td>{new Date(dateAddedString).toString().substring(0, 25)}</td>\n            <td>{this.diff_hours(new Date(dateAddedString))}</td>\n            {/* <td>{this.checkStatusGateway(this.diff_hours(new Date(dateAddedString)))}</td> */}\n         </tr>\n\n\n      )\n\n      // <td>{new Date(latest_da1).toString().substring(0, 25)}</td>\n      // <td>{new Date(latest_r1).toString().substring(0, 25)}</td>\n      // <td>{new Date(latest_ma1).toString().substring(0, 25)}</td>\n\n\n   }\n\n   checkStatusGateway(hrs) {\n      if (hrs * 60 > 1) {\n         return \"Might be turned off\\n or \\nrequires maintenance\"\n      }\n\n      return \"Device is working\"\n   }\n\n   renderTableData2() {\n      var beaconArray = this.state.beaconArray;\n      console.log(beaconArray)\n\n      var latest_da1 = JSON.parse(beaconArray[0].lastSeen_da1);\n      var latest_ma1 = JSON.parse(beaconArray[0].last_seen_ma1);\n      var latest_r1 = JSON.parse(beaconArray[0].last_seen_r1);\n      var dateAddedString = JSON.parse(this.state.dateAddedString);\n\n      for (let i = 1; i < beaconArray.length; i++) {\n\n         var current_da1 = JSON.parse(beaconArray[i].lastSeen_da1);\n         var current_ma1 = JSON.parse(beaconArray[i].last_seen_ma1);\n         var current_r1 = JSON.parse(beaconArray[i].last_seen_r1);\n\n\n         if (new Date(current_da1) > new Date(latest_da1)) {\n            latest_da1 = current_da1\n         }\n\n         if (new Date(current_ma1) > new Date(latest_ma1)) {\n            latest_ma1 = current_ma1\n         }\n\n         if (new Date(current_r1) > new Date(latest_r1)) {\n            latest_r1 = current_r1\n         }\n\n      }\n\n      return (\n         <tr>\n            <td>{this.diff_hours(new Date(latest_da1)) + \" hr(s)\"}</td>\n            <td>{this.diff_hours(new Date(latest_r1)) + \" hr(s)\"}</td>\n            <td>{this.diff_hours(new Date(latest_ma1)) + \" hr(s)\"}</td>\n            <td>{this.diff_hours(new Date(dateAddedString)) + \" hr(s)\"}</td>\n         </tr>\n      )\n\n\n   }\n\n   diff_hours(date) {\n\n      var current = new Date()\n\n      // get total seconds between the times\n      var delta = Math.abs(current - date) / 1000;\n\n      // calculate (and subtract) whole days\n      var days = Math.floor(delta / 86400);\n      delta -= days * 86400;\n\n      // calculate (and subtract) whole hours\n      var hours = Math.floor(delta / 3600) % 24;\n      delta -= hours * 3600;\n\n      // calculate (and subtract) whole minutes\n      var minutes = Math.floor(delta / 60) % 60;\n      delta -= minutes * 60;\n\n      // what's left is seconds\n      var seconds = delta % 60;  // in theory the modulus is not required\n\n\n      return days + \" Day \" + hours+ \" Hr \" + minutes +\" Min \" + seconds + \" Sec \" \n\n      // var diff = (date.getTime() - current.getTime()) / 1000;\n      // diff /= (60 * 60);\n      // return Math.abs(Math.round(diff));\n\n   }\n\n   render() {\n      if (this.state.beaconArray.length > 0) {\n\n\n         return (\n\n\n            /* font-size: calc(10px + 2vmin); */\n            <div style={{ marginTop: \"10px\", paddingBottom: \"20px\", fontSize: \"calc(10px + 2vmin)\" }}>\n               {/* <Container>\n                  <Row>\n                     <Col>\n                        <img style={{ width: \"190px\", height: \"190px\", marginRight: \"30px\", marginLeft: \"30px\" }} src={require(\".././img/BEARCONS.png\")} />\n   \n                     </Col>\n                  </Row>\n               </Container> */}\n\n               <h1 id='title' style={{ color: \"white\", marginBottom: \"15px\" }}>System Monitoring Dashboard</h1>\n               <img style={{ width: \"700px\", height: \"400px\", marginLeft: \"10px\", backgroundColor: \"White\" }} src={require(\".././img/layout.jpg\")} />\n               <br></br>\n               <p>Latest Datetime Data Retrieved from Gateway: <b style={{ color: \"OrangeRed\" }}>{new Date(JSON.parse(this.state.dateAddedString)).toString().substring(0, 25)}</b></p>\n               <hr\n                  style={{\n                     color: \"white\",\n                     backgroundColor: \"white\",\n                     height: 1\n                  }}\n               />\n\n\n\n               <h3>Device List</h3>\n               <Table striped bordered hover variant=\"dark\"  >\n                  <table id='beacon'>\n                     <thead>\n                        {/* <tr>{this.renderTableHeader()}</tr> */}\n                        <tr>\n                           <th>Device</th>\n                           <th>Latest Data Timestamp</th>\n                           <th>Amt of hr(s) since the last data</th>\n                           <th>Status</th>\n\n                        </tr>\n                     </thead>\n                     <tbody>\n                        {this.renderTableData()}\n                     </tbody>\n                  </table>\n               </Table>\n\n               <h3>Amount of duration each device has stopped sending data:</h3>\n               <Table striped bordered hover variant=\"dark\"  >\n\n                  <thead>\n                     {/* <tr>{this.renderTableHeader()}</tr> */}\n                     <tr>\n                        <th>Receiver 1</th>\n                        <th>Receiver 2</th>\n                        <th>Receiver 3</th>\n                        <th>Gateway</th>\n\n                     </tr>\n                  </thead>\n                  <tbody>\n                     {this.renderTableData2()}\n                  </tbody>\n\n               </Table>\n\n\n\n            </div>\n         )\n      }\n\n      return (\n         <div></div>\n      )\n   }\n\n}\n\nexport default TableDashboardSystem"]},"metadata":{},"sourceType":"module"}