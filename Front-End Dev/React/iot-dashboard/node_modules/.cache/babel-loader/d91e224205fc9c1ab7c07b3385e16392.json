{"ast":null,"code":"var _jsxFileName = \"/Users/syukrirahiman/OneDrive - Singapore Management University/React/iot-test/src/components/Tables/tablesSystem.js\";\nimport React, { Component } from 'react';\nimport 'firebase/database';\nimport * as firebase from 'firebase/app';\nimport { Table, Jumbotron, Container, Row, Col, Button, Pagination } from 'react-bootstrap';\nconst beaconlist = {\n  \"c2af522362be\": \"Client A\",\n  \"e20200bc8540\": \"Client B\"\n};\nconst imagelist = {\n  \"c2af522362be\": require(\".././img/clienta.png\"),\n  \"e20200bc8540\": require(\".././img/clienta.png\")\n};\n\nclass TableDashboardSystem extends React.Component {\n  constructor(props) {\n    super(props);\n    const beaconlist = {\n      \"c2af522362be\": \"Client A\",\n      \"e20200bc8540\": \"Client B\"\n    };\n    var self = this;\n    const rootRef = firebase.database().ref();\n    const beaconRef = rootRef.child('deployment').orderByChild(\"dateAdded\"); //sort by timestamp\n\n    const tableval = beaconRef.limitToLast(1).on('child_added', function (snapshot) {\n      var data = snapshot.val();\n      console.log(data);\n      console.log(beaconlist[0]);\n      var beacon_1 = data[Object.keys(beaconlist)[0]];\n      var beacon_2 = data[Object.keys(beaconlist)[1]];\n      var dateAddedString = data.dateAdded;\n      console.log(beacon_1);\n      self.setState({\n        beaconArray: [{\n          id: beacon_1.id,\n          lastSeen: beacon_1.lastSeen,\n          rssi_da1: beacon_1.rssi_da1,\n          lastSeen_da1: beacon_1.lastSeen_da1,\n          rssi_ma1: beacon_1.rssi_ma1,\n          last_seen_ma1: beacon_1.last_seen_ma1,\n          rssi_r1: beacon_1.rssi_r1,\n          last_seen_r1: beacon_1.last_seen_r1,\n          statusMsg: beacon_1.statusMsg\n        }, {\n          id: beacon_2.id,\n          lastSeen: beacon_2.lastSeen,\n          rssi_da1: beacon_2.rssi_da1,\n          lastSeen_da1: beacon_2.lastSeen_da1,\n          rssi_ma1: beacon_2.rssi_ma1,\n          last_seen_ma1: beacon_2.last_seen_ma1,\n          rssi_r1: beacon_2.rssi_r1,\n          last_seen_r1: beacon_2.last_seen_r1,\n          statusMsg: beacon_2.statusMsg\n        }],\n        dateAddedString: dateAddedString\n      });\n    });\n    this.state = {\n      beaconArray: []\n    };\n  }\n\n  displayDateTimne(date) {\n    var hours = date.getHours();\n    var minutes = date.getMinutes();\n    var ampm = hours >= 12 ? 'pm' : 'am';\n    hours = hours % 12;\n    hours = hours ? hours : 12; // the hour '0' should be '12'\n\n    minutes = minutes < 10 ? '0' + minutes : minutes;\n    var strTime = hours + ':' + minutes + ' ' + ampm;\n    return date.getMonth() + 1 + \"/\" + date.getDate() + \"/\" + date.getFullYear() + \"  \" + strTime;\n  }\n\n  renderTableHeader() {\n    let header = Object.keys(this.state.beaconArray);\n    return header.map((key, index) => {\n      return React.createElement(\"th\", {\n        key: index,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, key.toUpperCase());\n    });\n  }\n\n  renderTableData() {\n    var beaconArray = this.state.beaconArray;\n    console.log(beaconArray);\n    var latest_da1 = JSON.parse(beaconArray[0].lastSeen_da1);\n    var latest_ma1 = JSON.parse(beaconArray[0].last_seen_ma1);\n    var latest_r1 = JSON.parse(beaconArray[0].last_seen_r1);\n\n    for (let i = 1; i < beaconArray.length; i++) {\n      var current_da1 = JSON.parse(beaconArray[0].lastSeen_da1);\n      var current_ma1 = JSON.parse(beaconArray[0].last_seen_ma1);\n      var current_r1 = JSON.parse(beaconArray[0].last_seen_r1);\n\n      if (new Date(current_da1) > new Date(latest_da1)) {\n        latest_da1 = current_da1;\n      }\n\n      if (new Date(current_ma1) > new Date(latest_ma1)) {\n        latest_ma1 = current_ma1;\n      }\n\n      if (new Date(current_r1) > new Date(latest_r1)) {\n        latest_r1 = current_r1;\n      }\n    }\n\n    return React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, new Date(latest_da1).toString().substring(0, 25)), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, new Date(latest_ma1).toString().substring(0, 25)), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, new Date(latest_r1).toString().substring(0, 25))); //  return this.state.beaconArray.map((beaconArray, index) => {\n    //     const { id, lastSeen, rssi_da1,lastSeen_da1, rssi_da2, lastSeen_da2, statusMsg} = beaconArray //destructuring\n    //     var d = JSON.parse(lastSeen)\n    //     var x = new Date(d);\n    //     console.log(x);\n    //     return (\n    //        <tr key={id}>\n    //           <td>{beaconlist[id]}</td>\n    //           <td><img style={{ width: \"60px\", height: \"60px\" }} src={imagelist[id]}/></td>\n    //           <td>{x.toString()}</td>\n    //           <td>{statusMsg}</td>\n    //        </tr>\n    //     )\n    //  })\n  }\n\n  render() {\n    if (this.state.beaconArray.length > 0) {\n      return (\n        /* font-size: calc(10px + 2vmin); */\n        React.createElement(\"div\", {\n          style: {\n            marginTop: \"10px\",\n            paddingBottom: \"20px\",\n            fontSize: \"calc(10px + 2vmin)\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 149\n          },\n          __self: this\n        }, React.createElement(Container, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 150\n          },\n          __self: this\n        }, React.createElement(Row, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 151\n          },\n          __self: this\n        }, React.createElement(Col, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 152\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          style: {\n            width: \"190px\",\n            height: \"190px\",\n            marginRight: \"30px\",\n            marginLeft: \"30px\"\n          },\n          src: require(\".././img/BEARCONS.png\"),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 153\n          },\n          __self: this\n        })))), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 158\n          },\n          __self: this\n        }), React.createElement(\"h1\", {\n          id: \"title\",\n          style: {\n            color: \"white\",\n            marginBottom: \"15px\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 159\n          },\n          __self: this\n        }, \"System Monitoring Dashboard\"), React.createElement(\"img\", {\n          style: {\n            width: \"600px\",\n            height: \"400px\",\n            marginLeft: \"10px\",\n            backgroundColor: \"White\"\n          },\n          src: require(\".././img/layout.jpg\"),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 160\n          },\n          __self: this\n        }), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 161\n          },\n          __self: this\n        }, \"Latest Data Retrieved from Gateway: \", React.createElement(\"b\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 161\n          },\n          __self: this\n        }, new Date(JSON.parse(this.state.dateAddedString)).toString().substring(0, 25))), React.createElement(Table, {\n          striped: true,\n          bordered: true,\n          hover: true,\n          variant: \"dark\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 162\n          },\n          __self: this\n        }, React.createElement(\"table\", {\n          id: \"beacon\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 163\n          },\n          __self: this\n        }, React.createElement(\"thead\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 164\n          },\n          __self: this\n        }, React.createElement(\"tr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 166\n          },\n          __self: this\n        }, React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 167\n          },\n          __self: this\n        }, \"Dining Area\"), React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 168\n          },\n          __self: this\n        }, \"Guest Area\"), React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 169\n          },\n          __self: this\n        }, \"Main Area\"))), React.createElement(\"tbody\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 173\n          },\n          __self: this\n        }, this.renderTableData()))))\n      );\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    });\n  }\n\n}\n\nexport default TableDashboardSystem;","map":{"version":3,"sources":["/Users/syukrirahiman/OneDrive - Singapore Management University/React/iot-test/src/components/Tables/tablesSystem.js"],"names":["React","Component","firebase","Table","Jumbotron","Container","Row","Col","Button","Pagination","beaconlist","imagelist","require","TableDashboardSystem","constructor","props","self","rootRef","database","ref","beaconRef","child","orderByChild","tableval","limitToLast","on","snapshot","data","val","console","log","beacon_1","Object","keys","beacon_2","dateAddedString","dateAdded","setState","beaconArray","id","lastSeen","rssi_da1","lastSeen_da1","rssi_ma1","last_seen_ma1","rssi_r1","last_seen_r1","statusMsg","state","displayDateTimne","date","hours","getHours","minutes","getMinutes","ampm","strTime","getMonth","getDate","getFullYear","renderTableHeader","header","map","key","index","toUpperCase","renderTableData","latest_da1","JSON","parse","latest_ma1","latest_r1","i","length","current_da1","current_ma1","current_r1","Date","toString","substring","render","marginTop","paddingBottom","fontSize","width","height","marginRight","marginLeft","color","marginBottom","backgroundColor"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport 'firebase/database';\nimport * as firebase from 'firebase/app'\nimport { Table, Jumbotron, Container, Row, Col, Button, Pagination } from 'react-bootstrap';\n\nconst beaconlist = { \"c2af522362be\": \"Client A\", \"e20200bc8540\": \"Client B\" }\nconst imagelist = { \"c2af522362be\": require(\".././img/clienta.png\"), \"e20200bc8540\": require(\".././img/clienta.png\") }\nclass TableDashboardSystem extends React.Component {\n   constructor(props) {\n      super(props)\n      const beaconlist = { \"c2af522362be\": \"Client A\", \"e20200bc8540\": \"Client B\" }\n      var self = this;\n      const rootRef = firebase.database().ref();\n      const beaconRef = rootRef.child('deployment').orderByChild(\"dateAdded\");\n      //sort by timestamp\n      const tableval = beaconRef.limitToLast(1).on('child_added', function (snapshot) {\n         var data = snapshot.val();\n\n         console.log(data);\n         console.log(beaconlist[0]);\n         var beacon_1 = data[Object.keys(beaconlist)[0]];\n         var beacon_2 = data[Object.keys(beaconlist)[1]];\n         var dateAddedString = data.dateAdded;\n         console.log(beacon_1);\n\n\n         self.setState({\n            beaconArray: [\n               {\n                  id: beacon_1.id,\n                  lastSeen: beacon_1.lastSeen,\n                  rssi_da1: beacon_1.rssi_da1,\n                  lastSeen_da1: beacon_1.lastSeen_da1,\n                  rssi_ma1: beacon_1.rssi_ma1,\n                  last_seen_ma1: beacon_1.last_seen_ma1,\n                  rssi_r1: beacon_1.rssi_r1,\n                  last_seen_r1: beacon_1.last_seen_r1,\n                  statusMsg: beacon_1.statusMsg,\n               },\n\n               {\n                  id: beacon_2.id,\n                  lastSeen: beacon_2.lastSeen,\n                  rssi_da1: beacon_2.rssi_da1,\n                  lastSeen_da1: beacon_2.lastSeen_da1,\n                  rssi_ma1: beacon_2.rssi_ma1,\n                  last_seen_ma1: beacon_2.last_seen_ma1,\n                  rssi_r1: beacon_2.rssi_r1,\n                  last_seen_r1: beacon_2.last_seen_r1,\n                  statusMsg: beacon_2.statusMsg\n               }\n\n            ],\n            dateAddedString: dateAddedString,\n\n         })\n\n      });\n\n      this.state = {\n         beaconArray: []\n      }\n   }\n\n   displayDateTimne(date) {\n\n      var hours = date.getHours();\n      var minutes = date.getMinutes();\n      var ampm = hours >= 12 ? 'pm' : 'am';\n      hours = hours % 12;\n      hours = hours ? hours : 12; // the hour '0' should be '12'\n      minutes = minutes < 10 ? '0' + minutes : minutes;\n      var strTime = hours + ':' + minutes + ' ' + ampm;\n      return date.getMonth() + 1 + \"/\" + date.getDate() + \"/\" + date.getFullYear() + \"  \" + strTime;\n\n\n   }\n   renderTableHeader() {\n\n      let header = Object.keys(this.state.beaconArray)\n      return header.map((key, index) => {\n         return <th key={index}>{key.toUpperCase()}</th>\n      })\n   }\n\n   renderTableData() {\n      var beaconArray = this.state.beaconArray;\n      console.log(beaconArray)\n\n      var latest_da1 = JSON.parse(beaconArray[0].lastSeen_da1);\n      var latest_ma1 = JSON.parse(beaconArray[0].last_seen_ma1);\n      var latest_r1 = JSON.parse(beaconArray[0].last_seen_r1);\n\n      for (let i = 1; i < beaconArray.length; i++) {\n\n         var current_da1 = JSON.parse(beaconArray[0].lastSeen_da1);\n         var current_ma1 = JSON.parse(beaconArray[0].last_seen_ma1);\n         var current_r1 = JSON.parse(beaconArray[0].last_seen_r1);\n\n\n         if (new Date(current_da1) > new Date(latest_da1)) {\n            latest_da1 = current_da1\n         }\n\n         if (new Date(current_ma1) > new Date(latest_ma1)) {\n            latest_ma1 = current_ma1\n         }\n\n         if (new Date(current_r1) > new Date(latest_r1)) {\n            latest_r1 = current_r1\n         }\n\n      }\n\n      return (\n         <tr>\n            <td>{new Date(latest_da1).toString().substring(0, 25)}</td>\n            <td>{new Date(latest_ma1).toString().substring(0, 25)}</td>\n            <td>{new Date(latest_r1).toString().substring(0, 25)}</td>\n         </tr>\n      )\n\n      //  return this.state.beaconArray.map((beaconArray, index) => {\n      //     const { id, lastSeen, rssi_da1,lastSeen_da1, rssi_da2, lastSeen_da2, statusMsg} = beaconArray //destructuring\n      //     var d = JSON.parse(lastSeen)\n      //     var x = new Date(d);\n\n      //     console.log(x);\n\n      //     return (\n      //        <tr key={id}>\n      //           <td>{beaconlist[id]}</td>\n      //           <td><img style={{ width: \"60px\", height: \"60px\" }} src={imagelist[id]}/></td>\n      //           <td>{x.toString()}</td>\n      //           <td>{statusMsg}</td>\n      //        </tr>\n      //     )\n      //  })\n   }\n\n   render() {\n      if (this.state.beaconArray.length > 0) {\n\n\n         return (\n\n\n            /* font-size: calc(10px + 2vmin); */\n            <div style={{ marginTop: \"10px\", paddingBottom: \"20px\", fontSize: \"calc(10px + 2vmin)\" }}>\n               <Container>\n                  <Row>\n                     <Col>\n                        <img style={{ width: \"190px\", height: \"190px\", marginRight: \"30px\", marginLeft: \"30px\" }} src={require(\".././img/BEARCONS.png\")} />\n   \n                     </Col>\n                  </Row>\n               </Container>\n               <br></br>\n               <h1 id='title' style={{ color: \"white\", marginBottom: \"15px\" }}>System Monitoring Dashboard</h1>\n               <img style={{ width: \"600px\", height: \"400px\", marginLeft: \"10px\", backgroundColor: \"White\" }} src={require(\".././img/layout.jpg\")} />\n               <p>Latest Data Retrieved from Gateway: <b>{new Date(JSON.parse(this.state.dateAddedString)).toString().substring(0, 25)}</b></p>\n               <Table striped bordered hover variant=\"dark\"  >\n                  <table id='beacon'>\n                     <thead>\n                        {/* <tr>{this.renderTableHeader()}</tr> */}\n                        <tr>\n                           <th>Dining Area</th>\n                           <th>Guest Area</th>\n                           <th>Main Area</th>\n\n                        </tr>\n                     </thead>\n                     <tbody>\n                        {this.renderTableData()}\n                     </tbody>\n                  </table>\n               </Table>\n            </div>\n         )\n      }\n\n      return (\n         <div></div>\n      )\n   }\n\n}\n\nexport default TableDashboardSystem"]},"metadata":{},"sourceType":"module"}