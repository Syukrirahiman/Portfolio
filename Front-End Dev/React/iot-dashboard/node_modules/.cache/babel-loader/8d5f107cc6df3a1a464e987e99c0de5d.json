{"ast":null,"code":"var _jsxFileName = \"/Users/syukrirahiman/OneDrive - Singapore Management University/React/iot-test/src/components/client.js\";\nimport React, { Component } from 'react';\nimport 'firebase/database';\nimport * as firebase from 'firebase/app';\nimport { objectExpression } from '@babel/types';\nimport \"./analysis.css\";\nimport CanvasJSReact from '../assets/canvasjs.react';\nimport { Link, Redirect } from 'react-router-dom';\nimport { Table, Jumbotron, Container, Row, Col, Button, Pagination } from 'react-bootstrap';\nvar CanvasJSChart = CanvasJSReact.CanvasJSChart;\n\nclass Analysis extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      beacon: this.props.location.state.beacon,\n      timelineCount: {\n        seven: 0,\n        eight: 0,\n        nine: 0,\n        ten: 0,\n        eleven: 0,\n        twelve: 0,\n        thirteen: 0,\n        fourteen: 0,\n        fifteen: 0,\n        sixteen: 0,\n        seventeen: 0,\n        nonOperatingHour: 0\n      },\n      closingTime: \"18:00:00\",\n      openingTime: \"07:00:00\",\n      dataGenerated: false\n    };\n  }\n\n  componentDidMount() {\n    this.generateTimelineCount();\n  }\n\n  generateTimelineCount() {\n    var timeLeftHistory = this.state.beacon.timeLeftHistory;\n    var timelineCount = this.state.timelineCount;\n    var closing = this.state.closingTime;\n    var closingDate = Date.parse(\"01/01/2011 \" + closing);\n    var opening = this.state.openingTime;\n    var openingDate = Date.parse(\"01/01/2011 \" + opening);\n    var eight = \"08:00:00\";\n    var eightDate = Date.parse('01/01/2011 ' + eight);\n    var nine = \"09:00:00\";\n    var nineDate = Date.parse('01/01/2011 ' + nine);\n    var ten = \"10:00:00\";\n    var tenDate = Date.parse('01/01/2011 ' + ten);\n    var eleven = \"11:00:00\";\n    var elevenDate = Date.parse('01/01/2011 ' + eleven);\n    var twelve = \"12:00:00\";\n    var twelveDate = Date.parse('01/01/2011 ' + twelve);\n    var thirteen = \"13:00:00\";\n    var thirteenDate = Date.parse('01/01/2011 ' + thirteen);\n    var fourteen = \"14:00:00\";\n    var fourteenDate = Date.parse('01/01/2011 ' + fourteen);\n    var fifteen = \"15:00:00\";\n    var fifteenDate = Date.parse('01/01/2011 ' + fifteen);\n    var sixteen = \"16:00:00\";\n    var sixteenDate = Date.parse('01/01/2011 ' + sixteen);\n    var seventeen = \"17:00:00\";\n    var seventeenDate = Date.parse('01/01/2011 ' + seventeen);\n    var eightteen = \"18:00:00\";\n    var eightteenDate = Date.parse('01/01/2011 ' + eightteen);\n\n    for (let j = 0; j < timeLeftHistory.length; j++) {\n      var datetimestr = JSON.parse(timeLeftHistory[j]);\n      var datetime = new Date(datetimestr);\n      var time = datetime.toLocaleTimeString(); // console.log(time)\n      //set opening and closing time\n\n      var timeDate = Date.parse(\"01/01/2011 \" + time);\n      console.log(timeDate);\n      console.log(openingDate);\n      console.log(closingDate);\n\n      if (timeDate >= openingDate && timeDate < closingDate) {\n        if (timeDate < eightDate) {\n          timelineCount.seven += 1;\n        } else if (timeDate < nineDate) {\n          timelineCount.eight += 1;\n        } else if (timeDate < tenDate) {\n          timelineCount.nine += 1;\n        } else if (timeDate < elevenDate) {\n          timelineCount.eleven += 1;\n        } else if (timeDate < twelveDate) {\n          timelineCount.eleven += 1;\n        } else if (timeDate < thirteenDate) {\n          timelineCount.twelve += 1;\n        } else if (timeDate < fourteenDate) {\n          timelineCount.thirteen += 1;\n        } else if (timeDate < fifteenDate) {\n          timelineCount.fourteen += 1;\n        } else if (timeDate < sixteenDate) {\n          timelineCount.fifteen += 1;\n        } else if (timeDate < seventeenDate) {\n          timelineCount.sixteen += 1;\n        } else {\n          timelineCount.seveteen += 1;\n        }\n      } else {\n        timelineCount.nonOperatingHour += 1;\n      }\n    }\n\n    this.setState({\n      timelineCount: timelineCount,\n      dataGenerated: true\n    });\n  }\n\n  render() {\n    console.log(this.state);\n\n    if (this.state.dataGenerated) {\n      const options = {\n        animationEnabled: true,\n        exportEnabled: true,\n        theme: \"light2\",\n        // \"light1\", \"dark1\", \"dark2\"\n        title: {\n          text: \"Timeline Analysis\"\n        },\n        axisY: {\n          title: \"No. Of Time left\",\n          includeZero: false // suffix: \"%\"\n\n        },\n        axisX: {\n          title: \"Hour\" // prefix: \"W\",\n          // interval: 2\n\n        },\n        data: [{\n          type: \"line\",\n          toolTipContent: \"No. of time left at this hour ({label}): {y}\",\n          dataPoints: [{\n            label: \"07:00 to 07:59\",\n            x: 7,\n            y: this.state.timelineCount.seven\n          }, {\n            label: \"08:00 to 09:59\",\n            x: 8,\n            y: this.state.timelineCount.eight\n          }, {\n            label: \"09:00 to 09:59\",\n            x: 9,\n            y: this.state.timelineCount.nine\n          }, {\n            label: \"10:00 to 10:59\",\n            x: 10,\n            y: this.state.timelineCount.ten\n          }, {\n            label: \"11:00 to 11:59\",\n            x: 11,\n            y: this.state.timelineCount.eleven\n          }, {\n            label: \"12:00 to 12:59\",\n            x: 12,\n            y: this.state.timelineCount.twelve\n          }, {\n            label: \"13:00 to 13:59\",\n            x: 13,\n            y: this.state.timelineCount.thirteen\n          }, {\n            label: \"14:00 to 14:59\",\n            x: 14,\n            y: this.state.timelineCount.fourteen\n          }, {\n            label: \"15:00 to 15:59\",\n            x: 15,\n            y: this.state.timelineCount.fifteen\n          }, {\n            label: \"16:00 to 16:59\",\n            x: 16,\n            y: this.state.timelineCount.sixteen\n          }, {\n            label: \"17:00 to 17:59\",\n            x: 17,\n            y: this.state.timelineCount.seventeen\n          }]\n        }]\n      };\n      return React.createElement(\"div\", {\n        style: {\n          width: \"100%\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, \"Total number of time left per hour for \", this.state.beacon.name), React.createElement(CanvasJSChart, {\n        options: options\n        /* onRef={ref => this.chart = ref} */\n        ,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }), React.createElement(Link, {\n        to: {\n          pathname: \"/analytics\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, \"Back\")));\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }, \"Fetching data.... Please wait.  \"), React.createElement(\"div\", {\n      className: \"loader\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default Analysis;","map":{"version":3,"sources":["/Users/syukrirahiman/OneDrive - Singapore Management University/React/iot-test/src/components/client.js"],"names":["React","Component","firebase","objectExpression","CanvasJSReact","Link","Redirect","Table","Jumbotron","Container","Row","Col","Button","Pagination","CanvasJSChart","Analysis","constructor","props","state","beacon","location","timelineCount","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","nonOperatingHour","closingTime","openingTime","dataGenerated","componentDidMount","generateTimelineCount","timeLeftHistory","closing","closingDate","Date","parse","opening","openingDate","eightDate","nineDate","tenDate","elevenDate","twelveDate","thirteenDate","fourteenDate","fifteenDate","sixteenDate","seventeenDate","eightteen","eightteenDate","j","length","datetimestr","JSON","datetime","time","toLocaleTimeString","timeDate","console","log","seveteen","setState","render","options","animationEnabled","exportEnabled","theme","title","text","axisY","includeZero","axisX","data","type","toolTipContent","dataPoints","label","x","y","width","name","pathname"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport 'firebase/database';\nimport * as firebase from 'firebase/app'\nimport { objectExpression } from '@babel/types';\nimport \"./analysis.css\"\nimport CanvasJSReact from '../assets/canvasjs.react';\nimport { Link, Redirect } from 'react-router-dom';\nimport { Table, Jumbotron, Container, Row, Col, Button, Pagination } from 'react-bootstrap';\n\nvar CanvasJSChart = CanvasJSReact.CanvasJSChart\n\nclass Analysis extends React.Component {\n    constructor(props) {\n        super(props)\n\n\n        this.state = {\n            beacon: this.props.location.state.beacon,\n            timelineCount: {\n                seven: 0,\n                eight: 0,\n                nine: 0,\n                ten: 0,\n                eleven: 0,\n                twelve: 0,\n                thirteen: 0,\n                fourteen: 0,\n                fifteen: 0,\n                sixteen: 0,\n                seventeen: 0,\n                nonOperatingHour: 0,\n\n            },\n            closingTime: \"18:00:00\",\n            openingTime: \"07:00:00\",\n            dataGenerated: false,\n        }\n\n\n\n    }\n\n    componentDidMount() {\n\n        this.generateTimelineCount();\n\n    }\n\n    generateTimelineCount() {\n        var timeLeftHistory = this.state.beacon.timeLeftHistory;\n        var timelineCount = this.state.timelineCount;\n\n\n        var closing = this.state.closingTime;\n        var closingDate = Date.parse(\"01/01/2011 \" + closing);\n\n        var opening = this.state.openingTime;\n        var openingDate = Date.parse(\"01/01/2011 \" + opening);\n\n\n        var eight = \"08:00:00\";\n        var eightDate = Date.parse('01/01/2011 ' + eight)\n\n        var nine = \"09:00:00\";\n        var nineDate = Date.parse('01/01/2011 ' + nine)\n\n        var ten = \"10:00:00\";\n        var tenDate = Date.parse('01/01/2011 ' + ten)\n\n        var eleven = \"11:00:00\";\n        var elevenDate = Date.parse('01/01/2011 ' + eleven)\n\n        var twelve = \"12:00:00\";\n        var twelveDate = Date.parse('01/01/2011 ' + twelve)\n\n        var thirteen = \"13:00:00\";\n        var thirteenDate = Date.parse('01/01/2011 ' + thirteen)\n\n        var fourteen = \"14:00:00\";\n        var fourteenDate = Date.parse('01/01/2011 ' + fourteen)\n\n        var fifteen = \"15:00:00\";\n        var fifteenDate = Date.parse('01/01/2011 ' + fifteen)\n\n        var sixteen = \"16:00:00\";\n        var sixteenDate = Date.parse('01/01/2011 ' + sixteen)\n\n        var seventeen = \"17:00:00\";\n        var seventeenDate = Date.parse('01/01/2011 ' + seventeen)\n\n        var eightteen = \"18:00:00\";\n        var eightteenDate = Date.parse('01/01/2011 ' + eightteen)\n\n\n\n        for (let j = 0; j < timeLeftHistory.length; j++) {\n            var datetimestr = JSON.parse(timeLeftHistory[j]);\n            var datetime = new Date(datetimestr);\n            var time = datetime.toLocaleTimeString();\n            // console.log(time)\n\n\n            //set opening and closing time\n\n            var timeDate = Date.parse(\"01/01/2011 \" + time);\n\n            console.log(timeDate);\n            console.log(openingDate);\n            console.log(closingDate);\n\n\n            if (timeDate >= openingDate && timeDate < closingDate) {\n                if (timeDate < eightDate) {\n                    timelineCount.seven += 1;\n                } else if (timeDate < nineDate) {\n                    timelineCount.eight += 1;\n                } else if (timeDate < tenDate) {\n                    timelineCount.nine += 1;\n                } else if (timeDate < elevenDate) {\n                    timelineCount.eleven += 1;\n                } else if (timeDate < twelveDate) {\n                    timelineCount.eleven += 1;\n                } else if (timeDate < thirteenDate) {\n                    timelineCount.twelve += 1;\n                } else if (timeDate < fourteenDate) {\n                    timelineCount.thirteen += 1;\n                } else if (timeDate < fifteenDate) {\n                    timelineCount.fourteen += 1;\n                } else if (timeDate < sixteenDate) {\n                    timelineCount.fifteen += 1;\n                } else if (timeDate < seventeenDate) {\n                    timelineCount.sixteen += 1;\n                } else {\n                    timelineCount.seveteen += 1;\n                }\n\n\n            } else {\n                timelineCount.nonOperatingHour += 1\n\n            }\n        }\n\n        this.setState({\n            timelineCount: timelineCount,\n            dataGenerated: true,\n        })\n\n\n    }\n\n    render() {\n\n        console.log(this.state)\n\n        if (this.state.dataGenerated) {\n            const options = {\n                animationEnabled: true,\n                exportEnabled: true,\n                theme: \"light2\", // \"light1\", \"dark1\", \"dark2\"\n                title: {\n                    text: \"Timeline Analysis\"\n                },\n                axisY: {\n                    title: \"No. Of Time left\",\n                    includeZero: false,\n                    // suffix: \"%\"\n                },\n                axisX: {\n                    title: \"Hour\",\n                    // prefix: \"W\",\n                    // interval: 2\n                },\n                data: [{\n                    type: \"line\",\n                    toolTipContent: \"No. of time left at this hour ({label}): {y}\",\n                    dataPoints: [\n                        { label: \"07:00 to 07:59\", x: 7, y: this.state.timelineCount.seven },\n                        { label: \"08:00 to 09:59\",x: 8, y: this.state.timelineCount.eight },\n                        { label: \"09:00 to 09:59\",x: 9, y: this.state.timelineCount.nine },\n                        { label: \"10:00 to 10:59\", x: 10, y: this.state.timelineCount.ten },\n                        { label: \"11:00 to 11:59\", x: 11, y: this.state.timelineCount.eleven },\n                        { label: \"12:00 to 12:59\", x: 12, y: this.state.timelineCount.twelve },\n                        { label: \"13:00 to 13:59\", x: 13, y: this.state.timelineCount.thirteen },\n                        { label: \"14:00 to 14:59\", x: 14, y: this.state.timelineCount.fourteen },\n                        { label: \"15:00 to 15:59\", x: 15, y: this.state.timelineCount.fifteen },\n                        { label: \"16:00 to 16:59\", x: 16, y: this.state.timelineCount.sixteen },\n                        { label: \"17:00 to 17:59\", x: 17, y: this.state.timelineCount.seventeen },\n                  \n                    ]\n                }]\n            }\n\n            return (\n                <div style ={{width: \"100%\"}}>\n                    <h1>Total number of time left per hour for {this.state.beacon.name}</h1>\n                    <CanvasJSChart options={options}\n                    /* onRef={ref => this.chart = ref} */\n                    />\n                    {/*You can get reference to the chart instance as shown above using onRef. This allows you to access all chart properties and methods*/}\n\n                 <br></br>\n                    \n\n                    <Link\n                  to={{\n                    pathname: \"/analytics\"\n               \n                }} >\n                    <Button variant=\"primary\" >Back</Button>\n                </Link>\n                </div>\n            )\n\n\n        }\n\n        return (\n            <div>\n                <h1>Fetching data.... Please wait.  </h1>\n                <div className=\"loader\"></div>\n            </div>\n        )\n\n\n    }\n\n\n\n\n}\n\nexport default Analysis"]},"metadata":{},"sourceType":"module"}