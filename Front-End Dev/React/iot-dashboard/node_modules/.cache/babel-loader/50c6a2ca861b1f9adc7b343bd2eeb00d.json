{"ast":null,"code":"import _classCallCheck from\"/Users/weimingsoh/iot-test/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/weimingsoh/iot-test/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/weimingsoh/iot-test/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/weimingsoh/iot-test/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/weimingsoh/iot-test/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/weimingsoh/iot-test/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import'firebase/database';import*as firebase from'firebase/app';var beaconlist={\"c2af522362be\":\"Client A\",\"e20200bc8540\":\"Client B\"};var Table=/*#__PURE__*/function(_React$Component){_inherits(Table,_React$Component);function Table(props){var _this;_classCallCheck(this,Table);_this=_possibleConstructorReturn(this,_getPrototypeOf(Table).call(this,props));var beaconlist={\"c2af522362be\":\"Client A\",\"e20200bc8540\":\"Client B\"};var self=_assertThisInitialized(_this);var rootRef=firebase.database().ref();var beaconRef=rootRef.child('deployment');var tableval=beaconRef.limitToLast(1).on('child_added',function(snapshot){var data=snapshot.val();console.log(data);console.log(beaconlist[0]);var beacon_1=data[Object.keys(beaconlist)[0]];var beacon_2=data[Object.keys(beaconlist)[1]];console.log(beacon_1);self.setState({beaconArray:[{id:beacon_1.id,lastSeen:beacon_1.lastSeen,rssi_da1:beacon_1.rssi_da1,lastSeen_da1:beacon_1.lastSeen_da1,rssi_ma1:beacon_1.rssi_ma1,last_seen_ma1:beacon_1.last_seen_ma1,rssi_r1:beacon_1.rssi_r1,last_seen_r1:beacon_1.last_seen_r1,statusMsg:beacon_1.statusMsg},{id:beacon_2.id,lastSeen:beacon_2.lastSeen,rssi_da1:beacon_2.rssi_da1,lastSeen_da1:beacon_2.lastSeen_da1,rssi_ma1:beacon_2.rssi_ma1,last_seen_ma1:beacon_2.last_seen_ma1,rssi_r1:beacon_2.rssi_r1,last_seen_r1:beacon_2.last_seen_r1,statusMsg:beacon_2.statusMsg}]});});_this.state={beaconArray:[]};return _this;}_createClass(Table,[{key:\"renderTableHeader\",value:function renderTableHeader(){var header=Object.keys(this.state.beaconArray);return header.map(function(key,index){return React.createElement(\"th\",{key:index},key.toUpperCase());});}},{key:\"renderTableData\",value:function renderTableData(){return this.state.beaconArray.map(function(beaconArray,index){var id=beaconArray.id,lastSeen=beaconArray.lastSeen,rssi_da1=beaconArray.rssi_da1,lastSeen_da1=beaconArray.lastSeen_da1,rssi_da2=beaconArray.rssi_da2,lastSeen_da2=beaconArray.lastSeen_da2,statusMsg=beaconArray.statusMsg;//destructuring\nvar d=JSON.parse(lastSeen);var x=new Date(d);console.log(x);return React.createElement(\"tr\",{key:id},React.createElement(\"td\",null,beaconlist[id]),React.createElement(\"td\",null,id),React.createElement(\"td\",null,x.toString()),React.createElement(\"td\",null,statusMsg));});}},{key:\"render\",value:function render(){return React.createElement(\"div\",null,React.createElement(\"h1\",{id:\"title\"},\"Client Monitoring Dashboard\"),React.createElement(\"table\",{id:\"beacon\"},React.createElement(\"tbody\",null,React.createElement(\"tr\",null,React.createElement(\"th\",null,\"Name\"),React.createElement(\"th\",null,\"ID\"),React.createElement(\"th\",null,\"Last Seen\"),React.createElement(\"th\",null,\"Status Message\")),this.renderTableData())));}}]);return Table;}(React.Component);export default Table;","map":{"version":3,"sources":["/Users/weimingsoh/iot-test/src/components/Tables/tables.js"],"names":["React","Component","firebase","beaconlist","Table","props","self","rootRef","database","ref","beaconRef","child","tableval","limitToLast","on","snapshot","data","val","console","log","beacon_1","Object","keys","beacon_2","setState","beaconArray","id","lastSeen","rssi_da1","lastSeen_da1","rssi_ma1","last_seen_ma1","rssi_r1","last_seen_r1","statusMsg","state","header","map","key","index","toUpperCase","rssi_da2","lastSeen_da2","d","JSON","parse","x","Date","toString","renderTableData"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport 'firebase/database';\nimport * as firebase from 'firebase/app'\nconst beaconlist = {\"c2af522362be\" : \"Client A\",\"e20200bc8540\" : \"Client B\"}\nclass Table extends React.Component {\n    constructor(props) {\n        super(props)\n        const beaconlist = {\"c2af522362be\" : \"Client A\",\"e20200bc8540\" : \"Client B\"}\n        var self = this;\n        const rootRef = firebase.database().ref();\n        const beaconRef = rootRef.child('deployment');\n        const tableval = beaconRef.limitToLast(1).on('child_added',function(snapshot){\n            var data = snapshot.val();\n            \n            console.log(data);\n            console.log(beaconlist[0]);\n            var beacon_1 = data[Object.keys(beaconlist)[0]];\n            var beacon_2 = data[Object.keys(beaconlist)[1]];\n            console.log(beacon_1);\n            \n            self.setState({\n                beaconArray:[\n                  { id: beacon_1.id,\n                     lastSeen: beacon_1.lastSeen, \n                     rssi_da1: beacon_1.rssi_da1, \n                     lastSeen_da1: beacon_1.lastSeen_da1,\n                     rssi_ma1: beacon_1.rssi_ma1,\n                     last_seen_ma1: beacon_1.last_seen_ma1,\n                     rssi_r1: beacon_1.rssi_r1,\n                     last_seen_r1: beacon_1.last_seen_r1, \n                     statusMsg: beacon_1.statusMsg },\n\n                     { id: beacon_2.id,\n                        lastSeen: beacon_2.lastSeen, \n                        rssi_da1: beacon_2.rssi_da1, \n                        lastSeen_da1: beacon_2.lastSeen_da1,\n                        rssi_ma1: beacon_2.rssi_ma1,\n                        last_seen_ma1: beacon_2.last_seen_ma1,\n                        rssi_r1: beacon_2.rssi_r1,\n                        last_seen_r1: beacon_2.last_seen_r1, \n                        statusMsg: beacon_2.statusMsg }\n                  \n                 ]\n                \n            })\n            \n        }); \n\n       this.state = {\n          beaconArray: []\n       }\n    }\n    \n \n    renderTableHeader() {\n       \n       let header = Object.keys(this.state.beaconArray)\n       return header.map((key, index) => {\n          return <th key={index}>{key.toUpperCase()}</th>\n       })\n    }\n \n    renderTableData() {\n\n       return this.state.beaconArray.map((beaconArray, index) => {\n          const { id, lastSeen, rssi_da1,lastSeen_da1, rssi_da2, lastSeen_da2, statusMsg} = beaconArray //destructuring\n          var d = JSON.parse(lastSeen)\n          var x = new Date(d);\n          console.log(x);\n\n          return (\n             <tr key={id}>\n                <td>{beaconlist[id]}</td>\n                <td>{id}</td>\n                <td>{x.toString()}</td>\n                <td>{statusMsg}</td>\n             </tr>\n          )\n       })\n    }\n \n    render() {\n       return (\n          <div>\n             <h1 id='title'>Client Monitoring Dashboard</h1>\n             <table id='beacon'>\n                <tbody>\n                   {/* <tr>{this.renderTableHeader()}</tr> */}\n                   <tr>\n                      <th>Name</th>\n                      <th>ID</th>\n                      <th>Last Seen</th>\n                      <th>Status Message</th>\n                   </tr>\n                   {this.renderTableData()}\n                </tbody>\n             </table>\n          </div>\n       )\n    }\n    \n }\n\nexport default Table"]},"metadata":{},"sourceType":"module"}