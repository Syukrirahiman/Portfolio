{"ast":null,"code":"import _classCallCheck from\"/Users/syukrirahiman/OneDrive - Singapore Management University/React/iot-test/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/syukrirahiman/OneDrive - Singapore Management University/React/iot-test/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/syukrirahiman/OneDrive - Singapore Management University/React/iot-test/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/syukrirahiman/OneDrive - Singapore Management University/React/iot-test/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/syukrirahiman/OneDrive - Singapore Management University/React/iot-test/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/syukrirahiman/OneDrive - Singapore Management University/React/iot-test/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import'firebase/database';import*as firebase from'firebase/app';import{Table,Jumbotron,Container,Row,Col,Button,Pagination}from'react-bootstrap';var beaconlist={\"c2af522362be\":\"Client A\",\"e20200bc8540\":\"Client B\"};var imagelist={\"c2af522362be\":require(\".././img/clienta.png\"),\"e20200bc8540\":require(\".././img/clienta.png\")};var TableDashboard=/*#__PURE__*/function(_React$Component){_inherits(TableDashboard,_React$Component);function TableDashboard(props){var _this;_classCallCheck(this,TableDashboard);_this=_possibleConstructorReturn(this,_getPrototypeOf(TableDashboard).call(this,props));var beaconlist={\"c2af522362be\":\"Client A\",\"e20200bc8540\":\"Client B\"};var self=_assertThisInitialized(_this);var rootRef=firebase.database().ref();var beaconRef=rootRef.child('deployment').orderByChild(\"dateAdded\");//sort by timestamp\nvar tableval=beaconRef.limitToLast(1).on('child_added',function(snapshot){var data=snapshot.val();console.log(data);console.log(beaconlist[0]);var beacon_1=data[Object.keys(beaconlist)[0]];var beacon_2=data[Object.keys(beaconlist)[1]];console.log(beacon_1);self.setState({beaconArray:[{id:beacon_1.id,lastSeen:beacon_1.lastSeen,rssi_da1:beacon_1.rssi_da1,lastSeen_da1:beacon_1.lastSeen_da1,rssi_ma1:beacon_1.rssi_ma1,last_seen_ma1:beacon_1.last_seen_ma1,rssi_r1:beacon_1.rssi_r1,last_seen_r1:beacon_1.last_seen_r1,statusMsg:beacon_1.statusMsg},{id:beacon_2.id,lastSeen:beacon_2.lastSeen,rssi_da1:beacon_2.rssi_da1,lastSeen_da1:beacon_2.lastSeen_da1,rssi_ma1:beacon_2.rssi_ma1,last_seen_ma1:beacon_2.last_seen_ma1,rssi_r1:beacon_2.rssi_r1,last_seen_r1:beacon_2.last_seen_r1,statusMsg:beacon_2.statusMsg}]});});_this.state={beaconArray:[]};return _this;}_createClass(TableDashboard,[{key:\"renderTableHeader\",value:function renderTableHeader(){var header=Object.keys(this.state.beaconArray);return header.map(function(key,index){return React.createElement(\"th\",{key:index},key.toUpperCase());});}},{key:\"renderTableData\",value:function renderTableData(){return this.state.beaconArray.map(function(beaconArray,index){var id=beaconArray.id,lastSeen=beaconArray.lastSeen,rssi_da1=beaconArray.rssi_da1,lastSeen_da1=beaconArray.lastSeen_da1,rssi_da2=beaconArray.rssi_da2,lastSeen_da2=beaconArray.lastSeen_da2,statusMsg=beaconArray.statusMsg;//destructuring\nvar d=JSON.parse(lastSeen);var x=new Date(d);console.log(x);return React.createElement(\"tr\",{key:id},React.createElement(\"td\",null,beaconlist[id]),React.createElement(\"td\",null,React.createElement(\"img\",{style:{width:\"60px\",height:\"60px\"},src:imagelist[id]})),React.createElement(\"td\",null,x.toString()),React.createElement(\"td\",null,statusMsg));});}},{key:\"render\",value:function render(){return(/* font-size: calc(10px + 2vmin); */React.createElement(\"div\",{style:{marginTop:\"10px\",paddingBottom:\"20px\",fontSize:\"calc(10px + 2vmin)\"}},React.createElement(Container,null,React.createElement(Row,null,React.createElement(Col,null,React.createElement(\"img\",{style:{width:\"240px\",height:\"65px\"},src:require(\".././img/NTUC.png\")}),React.createElement(\"img\",{style:{width:\"190px\",height:\"190px\",marginRight:\"30px\",marginLeft:\"30px\"},src:require(\".././img/BEARCONS.png\")}),React.createElement(\"img\",{style:{width:\"200px\",height:\"80px\",marginLeft:\"10px\",backgroundColor:\"White\"},src:require(\".././img/SMU.png\")})))),React.createElement(\"br\",null),React.createElement(\"h1\",{id:\"title\",style:{color:\"white\",marginBottom:\"15px\"}},\"Client Monitoring Dashboard\"),React.createElement(Table,{striped:true,bordered:true,hover:true,variant:\"dark\"},React.createElement(\"table\",{id:\"beacon\"},React.createElement(\"thead\",null,React.createElement(\"tr\",null,React.createElement(\"th\",null,\"Name\"),React.createElement(\"th\",null,\"Profile Pic\"),React.createElement(\"th\",null,\"Last Seen\"),React.createElement(\"th\",null,\"Status Message\"))),React.createElement(\"tbody\",null,this.renderTableData())))));}}]);return TableDashboard;}(React.Component);export default TableDashboard;","map":{"version":3,"sources":["/Users/syukrirahiman/OneDrive - Singapore Management University/React/iot-test/src/components/Tables/tables.js"],"names":["React","Component","firebase","Table","Jumbotron","Container","Row","Col","Button","Pagination","beaconlist","imagelist","require","TableDashboard","props","self","rootRef","database","ref","beaconRef","child","orderByChild","tableval","limitToLast","on","snapshot","data","val","console","log","beacon_1","Object","keys","beacon_2","setState","beaconArray","id","lastSeen","rssi_da1","lastSeen_da1","rssi_ma1","last_seen_ma1","rssi_r1","last_seen_r1","statusMsg","state","header","map","key","index","toUpperCase","rssi_da2","lastSeen_da2","d","JSON","parse","x","Date","width","height","toString","marginTop","paddingBottom","fontSize","marginRight","marginLeft","backgroundColor","color","marginBottom","renderTableData"],"mappings":"o+BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAO,mBAAP,CACA,MAAO,GAAKC,CAAAA,QAAZ,KAA0B,cAA1B,CACA,OAASC,KAAT,CAAgBC,SAAhB,CAA2BC,SAA3B,CAAsCC,GAAtC,CAA2CC,GAA3C,CAAgDC,MAAhD,CAAwDC,UAAxD,KAA0E,iBAA1E,CAEA,GAAMC,CAAAA,UAAU,CAAG,CAAC,eAAiB,UAAlB,CAA6B,eAAiB,UAA9C,CAAnB,CACA,GAAMC,CAAAA,SAAS,CAAG,CAAC,eAAgBC,OAAO,CAAC,sBAAD,CAAxB,CAAkD,eAAiBA,OAAO,CAAC,sBAAD,CAA1E,CAAlB,C,GACMC,CAAAA,c,oFACF,wBAAYC,KAAZ,CAAmB,gDACf,gFAAMA,KAAN,GACA,GAAMJ,CAAAA,UAAU,CAAG,CAAC,eAAiB,UAAlB,CAA6B,eAAiB,UAA9C,CAAnB,CACA,GAAIK,CAAAA,IAAI,8BAAR,CACA,GAAMC,CAAAA,OAAO,CAAGd,QAAQ,CAACe,QAAT,GAAoBC,GAApB,EAAhB,CACA,GAAMC,CAAAA,SAAS,CAAGH,OAAO,CAACI,KAAR,CAAc,YAAd,EAA4BC,YAA5B,CAAyC,WAAzC,CAAlB,CACA;AACA,GAAMC,CAAAA,QAAQ,CAAGH,SAAS,CAACI,WAAV,CAAsB,CAAtB,EAAyBC,EAAzB,CAA4B,aAA5B,CAA0C,SAASC,QAAT,CAAkB,CACzE,GAAIC,CAAAA,IAAI,CAAGD,QAAQ,CAACE,GAAT,EAAX,CAEAC,OAAO,CAACC,GAAR,CAAYH,IAAZ,EACAE,OAAO,CAACC,GAAR,CAAYnB,UAAU,CAAC,CAAD,CAAtB,EACA,GAAIoB,CAAAA,QAAQ,CAAGJ,IAAI,CAACK,MAAM,CAACC,IAAP,CAAYtB,UAAZ,EAAwB,CAAxB,CAAD,CAAnB,CACA,GAAIuB,CAAAA,QAAQ,CAAGP,IAAI,CAACK,MAAM,CAACC,IAAP,CAAYtB,UAAZ,EAAwB,CAAxB,CAAD,CAAnB,CACAkB,OAAO,CAACC,GAAR,CAAYC,QAAZ,EAGAf,IAAI,CAACmB,QAAL,CAAc,CACVC,WAAW,CAAC,CACV,CAAEC,EAAE,CAAEN,QAAQ,CAACM,EAAf,CACGC,QAAQ,CAAEP,QAAQ,CAACO,QADtB,CAEGC,QAAQ,CAAER,QAAQ,CAACQ,QAFtB,CAGGC,YAAY,CAAET,QAAQ,CAACS,YAH1B,CAIGC,QAAQ,CAAEV,QAAQ,CAACU,QAJtB,CAKGC,aAAa,CAAEX,QAAQ,CAACW,aAL3B,CAMGC,OAAO,CAAEZ,QAAQ,CAACY,OANrB,CAOGC,YAAY,CAAEb,QAAQ,CAACa,YAP1B,CAQGC,SAAS,CAAEd,QAAQ,CAACc,SARvB,CADU,CAYP,CAAER,EAAE,CAAEH,QAAQ,CAACG,EAAf,CACGC,QAAQ,CAAEJ,QAAQ,CAACI,QADtB,CAEGC,QAAQ,CAAEL,QAAQ,CAACK,QAFtB,CAGGC,YAAY,CAAEN,QAAQ,CAACM,YAH1B,CAIGC,QAAQ,CAAEP,QAAQ,CAACO,QAJtB,CAKGC,aAAa,CAAER,QAAQ,CAACQ,aAL3B,CAMGC,OAAO,CAAET,QAAQ,CAACS,OANrB,CAOGC,YAAY,CAAEV,QAAQ,CAACU,YAP1B,CAQGC,SAAS,CAAEX,QAAQ,CAACW,SARvB,CAZO,CADF,CAAd,EA2BH,CArCgB,CAAjB,CAuCD,MAAKC,KAAL,CAAa,CACVV,WAAW,CAAE,EADH,CAAb,CA9CgB,aAiDlB,C,wFAGmB,CAEjB,GAAIW,CAAAA,MAAM,CAAGf,MAAM,CAACC,IAAP,CAAY,KAAKa,KAAL,CAAWV,WAAvB,CAAb,CACA,MAAOW,CAAAA,MAAM,CAACC,GAAP,CAAW,SAACC,GAAD,CAAMC,KAAN,CAAgB,CAC/B,MAAO,2BAAI,GAAG,CAAEA,KAAT,EAAiBD,GAAG,CAACE,WAAJ,EAAjB,CAAP,CACF,CAFM,CAAP,CAGF,C,yDAEiB,CAEf,MAAO,MAAKL,KAAL,CAAWV,WAAX,CAAuBY,GAAvB,CAA2B,SAACZ,WAAD,CAAcc,KAAd,CAAwB,IAC/Cb,CAAAA,EAD+C,CAC2BD,WAD3B,CAC/CC,EAD+C,CAC3CC,QAD2C,CAC2BF,WAD3B,CAC3CE,QAD2C,CACjCC,QADiC,CAC2BH,WAD3B,CACjCG,QADiC,CACxBC,YADwB,CAC2BJ,WAD3B,CACxBI,YADwB,CACVY,QADU,CAC2BhB,WAD3B,CACVgB,QADU,CACAC,YADA,CAC2BjB,WAD3B,CACAiB,YADA,CACcR,SADd,CAC2BT,WAD3B,CACcS,SADd,CACuC;AAC9F,GAAIS,CAAAA,CAAC,CAAGC,IAAI,CAACC,KAAL,CAAWlB,QAAX,CAAR,CACA,GAAImB,CAAAA,CAAC,CAAG,GAAIC,CAAAA,IAAJ,CAASJ,CAAT,CAAR,CACAzB,OAAO,CAACC,GAAR,CAAY2B,CAAZ,EAEA,MACG,2BAAI,GAAG,CAAEpB,EAAT,EACG,8BAAK1B,UAAU,CAAC0B,EAAD,CAAf,CADH,CAEG,8BAAI,2BAAK,KAAK,CAAE,CAAEsB,KAAK,CAAE,MAAT,CAAiBC,MAAM,CAAE,MAAzB,CAAZ,CAA+C,GAAG,CAAEhD,SAAS,CAACyB,EAAD,CAA7D,EAAJ,CAFH,CAGG,8BAAKoB,CAAC,CAACI,QAAF,EAAL,CAHH,CAIG,8BAAKhB,SAAL,CAJH,CADH,CAQF,CAdM,CAAP,CAeF,C,uCAEQ,CACN,MAGI,qCACD,2BAAK,KAAK,CAAE,CAACiB,SAAS,CAAE,MAAZ,CAAoBC,aAAa,CAAC,MAAlC,CAA0CC,QAAQ,CAAE,oBAApD,CAAZ,EACG,oBAAC,SAAD,MACG,oBAAC,GAAD,MACG,oBAAC,GAAD,MACA,2BAAK,KAAK,CAAE,CAAEL,KAAK,CAAE,OAAT,CAAkBC,MAAM,CAAE,MAA1B,CAAZ,CAAgD,GAAG,CAAE/C,OAAO,CAAC,mBAAD,CAA5D,EADA,CAEA,2BAAK,KAAK,CAAE,CAAE8C,KAAK,CAAE,OAAT,CAAkBC,MAAM,CAAE,OAA1B,CAAkCK,WAAW,CAAC,MAA9C,CAAsDC,UAAU,CAAC,MAAjE,CAAZ,CAAuF,GAAG,CAAErD,OAAO,CAAC,uBAAD,CAAnG,EAFA,CAGA,2BAAK,KAAK,CAAE,CAAE8C,KAAK,CAAE,OAAT,CAAkBC,MAAM,CAAE,MAA1B,CAAkCM,UAAU,CAAC,MAA7C,CAAqDC,eAAe,CAAE,OAAtE,CAAZ,CAA6F,GAAG,CAAEtD,OAAO,CAAC,kBAAD,CAAzG,EAHA,CADH,CADH,CADH,CAYG,8BAZH,CAaG,0BAAI,EAAE,CAAC,OAAP,CAAe,KAAK,CAAE,CAACuD,KAAK,CAAC,OAAP,CAAgBC,YAAY,CAAC,MAA7B,CAAtB,gCAbH,CAcG,oBAAC,KAAD,EAAO,OAAO,KAAd,CAAe,QAAQ,KAAvB,CAAwB,KAAK,KAA7B,CAA8B,OAAO,CAAC,MAAtC,EACA,6BAAO,EAAE,CAAC,QAAV,EACG,iCAEG,8BACG,qCADH,CAEG,4CAFH,CAGG,0CAHH,CAIG,+CAJH,CAFH,CADH,CAUE,iCACK,KAAKC,eAAL,EADL,CAVF,CADA,CAdH,CAJH,EAoCF,C,4BArHwBrE,KAAK,CAACC,S,EAyHnC,cAAeY,CAAAA,cAAf","sourcesContent":["import React, { Component } from 'react'\nimport 'firebase/database';\nimport * as firebase from 'firebase/app'\nimport { Table, Jumbotron, Container, Row, Col, Button, Pagination } from 'react-bootstrap';\n\nconst beaconlist = {\"c2af522362be\" : \"Client A\",\"e20200bc8540\" : \"Client B\"}\nconst imagelist = {\"c2af522362be\" :require(\".././img/clienta.png\"), \"e20200bc8540\" : require(\".././img/clienta.png\")}\nclass TableDashboard extends React.Component {\n    constructor(props) {\n        super(props)\n        const beaconlist = {\"c2af522362be\" : \"Client A\",\"e20200bc8540\" : \"Client B\"}\n        var self = this;\n        const rootRef = firebase.database().ref();\n        const beaconRef = rootRef.child('deployment').orderByChild(\"dateAdded\");\n        //sort by timestamp\n        const tableval = beaconRef.limitToLast(1).on('child_added',function(snapshot){\n            var data = snapshot.val();\n            \n            console.log(data);\n            console.log(beaconlist[0]);\n            var beacon_1 = data[Object.keys(beaconlist)[0]];\n            var beacon_2 = data[Object.keys(beaconlist)[1]];\n            console.log(beacon_1);\n   \n            \n            self.setState({\n                beaconArray:[\n                  { id: beacon_1.id,\n                     lastSeen: beacon_1.lastSeen, \n                     rssi_da1: beacon_1.rssi_da1, \n                     lastSeen_da1: beacon_1.lastSeen_da1,\n                     rssi_ma1: beacon_1.rssi_ma1,\n                     last_seen_ma1: beacon_1.last_seen_ma1,\n                     rssi_r1: beacon_1.rssi_r1,\n                     last_seen_r1: beacon_1.last_seen_r1, \n                     statusMsg: beacon_1.statusMsg,\n                  },\n\n                     { id: beacon_2.id,\n                        lastSeen: beacon_2.lastSeen, \n                        rssi_da1: beacon_2.rssi_da1, \n                        lastSeen_da1: beacon_2.lastSeen_da1,\n                        rssi_ma1: beacon_2.rssi_ma1,\n                        last_seen_ma1: beacon_2.last_seen_ma1,\n                        rssi_r1: beacon_2.rssi_r1,\n                        last_seen_r1: beacon_2.last_seen_r1, \n                        statusMsg: beacon_2.statusMsg }\n                  \n                 ]\n                \n            })\n            \n        }); \n\n       this.state = {\n          beaconArray: []\n       }\n    }\n    \n \n    renderTableHeader() {\n       \n       let header = Object.keys(this.state.beaconArray)\n       return header.map((key, index) => {\n          return <th key={index}>{key.toUpperCase()}</th>\n       })\n    }\n \n    renderTableData() {\n\n       return this.state.beaconArray.map((beaconArray, index) => {\n          const { id, lastSeen, rssi_da1,lastSeen_da1, rssi_da2, lastSeen_da2, statusMsg} = beaconArray //destructuring\n          var d = JSON.parse(lastSeen)\n          var x = new Date(d);\n          console.log(x);\n\n          return (\n             <tr key={id}>\n                <td>{beaconlist[id]}</td>\n                <td><img style={{ width: \"60px\", height: \"60px\" }} src={imagelist[id]}/></td>\n                <td>{x.toString()}</td>\n                <td>{statusMsg}</td>\n             </tr>\n          )\n       })\n    }\n \n    render() {\n       return (\n         \n\n           /* font-size: calc(10px + 2vmin); */\n          <div style={{marginTop: \"10px\", paddingBottom:\"20px\", fontSize: \"calc(10px + 2vmin)\"}}>\n             <Container>\n                <Row>\n                   <Col>\n                   <img style={{ width: \"240px\", height: \"65px\" }} src={require(\".././img/NTUC.png\")}/>  \n                   <img style={{ width: \"190px\", height: \"190px\",marginRight:\"30px\", marginLeft:\"30px\" }} src={require(\".././img/BEARCONS.png\")}/>\n                   <img style={{ width: \"200px\", height: \"80px\", marginLeft:\"10px\", backgroundColor: \"White\" }} src={require(\".././img/SMU.png\")}/>  \n                   \n                   {/* <img style={{ width: \"150px\", height: \"150px\" }} src={require(\".././img/SMU.png\")}/> */}\n                   </Col>\n                </Row>\n             </Container>\n             <br></br>\n             <h1 id='title' style={{color:\"white\", marginBottom:\"15px\"}}>Client Monitoring Dashboard</h1>   \n             <Table striped bordered hover variant=\"dark\"  >\n             <table id='beacon'>\n                <thead>\n                   {/* <tr>{this.renderTableHeader()}</tr> */}\n                   <tr>\n                      <th>Name</th>\n                      <th>Profile Pic</th>\n                      <th>Last Seen</th>\n                      <th>Status Message</th>\n                   </tr>\n                   </thead>\n               <tbody>\n                   {this.renderTableData()}\n                </tbody>\n             </table>\n             </Table>\n          </div>\n       )\n    }\n    \n }\n\nexport default TableDashboard"]},"metadata":{},"sourceType":"module"}