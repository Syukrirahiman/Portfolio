{"ast":null,"code":"var _jsxFileName = \"/Users/syukrirahiman/OneDrive - Singapore Management University/React/movieapp/src/Map2.js\";\nimport React, { Component } from 'react';\nimport './Maps.css';\nimport axios from 'axios';\n\nclass Map2 extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      venues: []\n    };\n\n    this.renderMap = () => {\n      loadScript(\"https://maps.googleapis.com/maps/api/js?key=AIzaSyDeW9x56y1K5r3sJHkMn5I6gQ4ohLsIeMM&callback=initMap\");\n      window.initMap = this.initMap;\n    };\n\n    this.initMap = () => {\n      var location = {\n        lat: 1.29992,\n        lng: 103.852\n      }; // Create A Map\n\n      var directionsRenderer = new windows.google.maps.DirectionsRenderer({\n        draggable: true\n      });\n      var directionsService = new windows.google.maps.DirectionsService();\n      var map = new window.google.maps.Map(document.getElementById('map'), {\n        center: {\n          lat: -34.397,\n          lng: 150.644\n        },\n        zoom: 15,\n        center: location\n      });\n      var control = document.getElementById('floating-panel');\n      control.style.display = 'block';\n      map.controls[google.maps.ControlPosition.TOP_CENTER].push(control);\n      var marker = new google.maps.Marker({\n        position: location,\n        map: map,\n        title: 'Cinema Here!'\n      }); // GET CARPARKS NEARBY (PLACES API)\n\n      var loc_lat = location.lat;\n      var loc_lng = location.lng;\n      var places_loc = loc_lat + \" \" + loc_lng;\n      var baseurl = \"https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=\".concat(places_loc, \"&radius=1000&type=parking&key=AIzaSyDeW9x56y1K5r3sJHkMn5I6gQ4ohLsIeMM\");\n      var request = new XMLHttpRequest();\n      request.open('GET', baseurl, true);\n\n      request.onload = function () {\n        var data = JSON.parse(this.response);\n        var cp_array = data.results;\n\n        for (var cp of cp_array) {\n          var lat = cp.geometry.location.lat;\n          var lng = cp.geometry.location.lng;\n          marker = new windows.google.maps.Marker({\n            position: {\n              lat: lat,\n              lng: lng\n            },\n            map: map,\n            icon: {\n              url: \"http://maps.google.com/mapfiles/ms/icons/green-dot.png\"\n            },\n            title: \"\".concat(cp.name)\n          }); // PARTS BELOW WERE PREVIOUSLY USED TO ATTEMPT TO GET A MATCH FROM DIFFERENT APIS\n          // lat = lat + \" \";\n          // lng = lng + \" \";\n          // lat = lat.slice(0,4);\n          // lng = lng.slice(0,6);\n          // var latlng = lat + \" \" + lng;\n          // var address = cp.name;\n          // var cp_position = lat + \" \" + lng;\n          // DISPLAY CARPARKS IN DROPDOWN LIST\n          // document.getElementById(\"cp_choices\").innerHTML += `<option value=\"${latlng}\">${address}</option>`\n        }\n      };\n\n      request.send();\n\n      var onChangeHandler = function () {\n        calculateAndDisplayRoute(directionsService, directionsRenderer);\n      }; // WHEN SUBMIT BUTTON IS CLICK, RENDERS DIRECTION SERVICE\n\n\n      document.getElementById('submit').addEventListener('click', onChangeHandler);\n    };\n  }\n\n  componentDidMount() {\n    // this.getVenues()\n    this.renderMap();\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      id: \"map\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    });\n  }\n\n}\n\nfunction loadScript(url) {\n  var index = window.document.getElementsByTagName(\"script\")[0];\n  var script = window.document.createElement(\"script\");\n  script.src = url;\n  script.async = true;\n  script.defer = true;\n  index.parentNode.insertBefore(script, index);\n}\n\nexport default Map2;","map":{"version":3,"sources":["/Users/syukrirahiman/OneDrive - Singapore Management University/React/movieapp/src/Map2.js"],"names":["React","Component","axios","Map2","state","venues","renderMap","loadScript","window","initMap","location","lat","lng","directionsRenderer","windows","google","maps","DirectionsRenderer","draggable","directionsService","DirectionsService","map","Map","document","getElementById","center","zoom","control","style","display","controls","ControlPosition","TOP_CENTER","push","marker","Marker","position","title","loc_lat","loc_lng","places_loc","baseurl","request","XMLHttpRequest","open","onload","data","JSON","parse","response","cp_array","results","cp","geometry","icon","url","name","send","onChangeHandler","calculateAndDisplayRoute","addEventListener","componentDidMount","render","index","getElementsByTagName","script","createElement","src","async","defer","parentNode","insertBefore"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport './Maps.css'\n\nimport axios from 'axios'\n\nclass Map2 extends Component {\n\n\n  state = {\n    venues: []\n  }\n\n  componentDidMount() {\n    // this.getVenues()\n    this.renderMap()\n  }\n \n  renderMap = () => {\n    loadScript(\"https://maps.googleapis.com/maps/api/js?key=AIzaSyDeW9x56y1K5r3sJHkMn5I6gQ4ohLsIeMM&callback=initMap\")\n    window.initMap = this.initMap\n  }\n\n  // getVenues = () => {\n  //   const endPoint = \"https://api.foursquare.com/v2/venues/explore?\"\n  //   const parameters = {\n  //     client_id: \"PMHC2WA1VCBHVYOPPSJ0QSBYTLRF4PNJ04OWVWV0PZJ0QFIR\",\n  //     client_secret: \"CULSZZ44YAEBOWBFGPB4BF5ISRXXSNYR0EE3JV3CNE2ZWHV0\",\n  //     query: \"food\",\n  //     near: \"Sydney\",\n  //     v: \"20182507\"\n  //   }\n\n  //   axios.get(endPoint + new URLSearchParams(parameters))\n  //     .then(response => {\n  //       this.setState({\n  //         venues: response.data.response.groups[0].items\n  //       }, this.renderMap())\n  //     })\n  //     .catch(error => {\n  //       console.log(\"ERROR!! \" + error)\n  //     })\n\n  // }\n\n  initMap = () => {\n    var location = {lat:1.29992, lng:103.852};\n    // Create A Map\n    var directionsRenderer = new windows.google.maps.DirectionsRenderer({ draggable: true });\n    var directionsService = new windows.google.maps.DirectionsService;\n    var map = new window.google.maps.Map(document.getElementById('map'), {\n      center: {lat: -34.397, lng: 150.644},\n      zoom: 15,\n      center: location\n    })\n\n    var control = document.getElementById('floating-panel');\n        control.style.display = 'block';\n        map.controls[google.maps.ControlPosition.TOP_CENTER].push(control);\n\n        var marker = new google.maps.Marker({\n                    position: location,\n                    map: map,\n                    title: 'Cinema Here!'\n                });\n\n        // GET CARPARKS NEARBY (PLACES API)\n        var loc_lat = location.lat;\n        var loc_lng = location.lng;\n        var places_loc = loc_lat + \" \" + loc_lng;\n        var baseurl = `https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=${places_loc}&radius=1000&type=parking&key=AIzaSyDeW9x56y1K5r3sJHkMn5I6gQ4ohLsIeMM`;\n        var request = new XMLHttpRequest();\n        request.open('GET', baseurl, true)\n        request.onload = function() {\n          var data = JSON.parse(this.response)\n          var cp_array = data.results;\n          for (var cp of cp_array) {\n            var lat = cp.geometry.location.lat;\n            var lng = cp.geometry.location.lng;\n            marker = new windows.google.maps.Marker({\n              position: {lat:lat, lng:lng},\n              map: map,\n              icon: {\n                  url: \"http://maps.google.com/mapfiles/ms/icons/green-dot.png\"\n              },\n              title: `${cp.name}`\n            });\n\n            // PARTS BELOW WERE PREVIOUSLY USED TO ATTEMPT TO GET A MATCH FROM DIFFERENT APIS\n            // lat = lat + \" \";\n            // lng = lng + \" \";\n            // lat = lat.slice(0,4);\n            // lng = lng.slice(0,6);\n            // var latlng = lat + \" \" + lng;\n            // var address = cp.name;\n            // var cp_position = lat + \" \" + lng;\n\n            // DISPLAY CARPARKS IN DROPDOWN LIST\n            // document.getElementById(\"cp_choices\").innerHTML += `<option value=\"${latlng}\">${address}</option>`\n            \n          }\n        }\n\n        request.send()\n        \n        var onChangeHandler = function() {\n            calculateAndDisplayRoute(directionsService, directionsRenderer);\n        };\n\n        // WHEN SUBMIT BUTTON IS CLICK, RENDERS DIRECTION SERVICE\n        document.getElementById('submit').addEventListener('click', onChangeHandler); \n  \n\n    \n\n  }\n\n  render() {\n    return (\n       \n        <div id=\"map\"></div>\n  \n\n    )\n  }\n}\n\nfunction loadScript(url) {\n  var index  = window.document.getElementsByTagName(\"script\")[0]\n  var script = window.document.createElement(\"script\")\n  script.src = url\n  script.async = true\n  script.defer = true\n  index.parentNode.insertBefore(script, index)\n}\n\nexport default Map2;"]},"metadata":{},"sourceType":"module"}